{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "HsvPicker.svelte",
    "IconBase.svelte",
    "Start.svelte",
    "CommandPrompt.svelte",
    "DirectoryListing.svelte",
    "Entry.svelte",
    "Env.svelte",
    "EnvTableRow.svelte",
    "ExtensionPrefs.svelte",
    "ExtraPanel.svelte",
    "FileManager.svelte",
    "GeneralPrefs.svelte",
    "GitHub.svelte",
    "MessageBox.svelte",
    "Pane.svelte",
    "Preferences.svelte",
    "QuickSearch.svelte",
    "ResizeBorder.svelte",
    "StatusLine.svelte",
    "ThemeItem.svelte",
    "ThemePrefs.svelte",
    "TitleBar.svelte"
  ],
  "sourcesContent": [
    "<script>\nimport {onMount,createEventDispatcher} from 'svelte';\n\nexport let startColor =\"#FF0000\";\n\nonMount(() => {\n document.addEventListener(\"mouseup\", mouseUp);\n document.addEventListener(\"touchend\", mouseUp);\n document.addEventListener(\"mousemove\", mouseMove);\n document.addEventListener(\"touchmove\", touchMove);\n document.addEventListener(\"touchstart\", killMouseEvents);\n document.addEventListener(\"mousedown\", killTouchEvents);\n setStartColor()\n});\n\nNumber.prototype.mod = function(n) {\n    return ((this%n)+n)%n;\n};\nconst dispatch = createEventDispatcher();\nlet tracked;\nlet h = 1;\nlet s = 1;\nlet v = 1;\nlet a = 1;\nlet r = 255;\nlet g = 0;\nlet b = 0;\nlet hexValue = '#FF0000';\n\n\nfunction setStartColor() {\n  let hex = startColor.replace('#','');\n  if (hex.length !== 6 && hex.length !== 3 && !hex.match(/([^A-F0-9])/gi)) {\n    alert('Invalid property value (startColor)');\n    return;\n  }\n  let hexFiltered='';\n  if (hex.length === 3)\n    hex.split('').forEach( c => {hexFiltered += c+c;});\n  else\n    hexFiltered=hex;\n  hexValue = hexFiltered;\n  r = parseInt(hexFiltered.substring(0,2), 16);\n  g = parseInt(hexFiltered.substring(2,4), 16);\n  b = parseInt(hexFiltered.substring(4,6), 16);\n  rgbToHSV(r,g,b,true);\n  updateCsPicker();\n  updateHuePicker();\n}\n\nfunction removeEventListenerFromElement(elementId, eventName, listenerCallback) {\n  let element = document.querySelector(elementId);\n  if (element) element.removeEventListener(eventName, listenerCallback);\n}\n\nfunction killMouseEvents() {\n  removeEventListenerFromElement(\"#alpha-event\", \"mousedown\", alphaDown);\n  removeEventListenerFromElement(\"#colorsquare-event\", \"mousedown\", csDown);\n  removeEventListenerFromElement(\"#hue-event\", \"mousedown\", hueDown);\n  document.removeEventListener(\"mouseup\",mouseUp);\n  document.removeEventListener(\"mousemove\",mouseMove);\n  document.removeEventListener(\"touchstart\",killMouseEvents);\n  document.removeEventListener(\"mousedown\",killTouchEvents);\n}\n\nfunction killTouchEvents() {\n  removeEventListenerFromElement(\"#alpha-event\", \"touchstart\", alphaDownTouch);\n  removeEventListenerFromElement(\"#colorsquare-event\", \"touchstart\", csDownTouch);\n  removeEventListenerFromElement(\"#hue-event\", \"touchstart\", hueDownTouch);\n  document.removeEventListener(\"touchend\",mouseUp);\n  document.removeEventListener(\"touchmove\",touchMove);\n  document.removeEventListener(\"touchstart\",killMouseEvents);\n  document.removeEventListener(\"mousedown\",killTouchEvents);\n}\n\nfunction updateCsPicker() {\n  let csPicker = document.querySelector(\"#colorsquare-picker\");\n  let xPercentage = s * 100;\n  let yPercentage = (1 - v) * 100;\n  csPicker.style.top = yPercentage + \"%\";\n  csPicker.style.left = xPercentage + \"%\";\n}\n\nfunction updateHuePicker() {\n  let huePicker = document.querySelector(\"#hue-picker\");\n  let xPercentage = h * 100;\n  huePicker.style.left = xPercentage + \"%\";\n}\n\nfunction colorChangeCallback() {\n  dispatch('colorChange', {\n  \t\t\tr: r,\n        g: g,\n        b: b,\n        a: a\n  \t\t});\n}\n\nfunction mouseMove(event) {\n if (tracked) {\n  let mouseX = event.clientX;\n  let mouseY = event.clientY;\n  let trackedPos = tracked.getBoundingClientRect();\n  let xPercentage, yPercentage, picker;\n  switch (tracked.id) {\n   case \"colorsquare-event\":\n    xPercentage = (mouseX - trackedPos.x) / 240 * 100;\n    yPercentage = (mouseY - trackedPos.y) / 160 * 100;\n    (xPercentage > 100) ? xPercentage = 100: (xPercentage < 0) ? xPercentage = 0 : null;\n    (yPercentage > 100) ? yPercentage = 100: (yPercentage < 0) ? yPercentage = 0 : null;\n    picker = document.querySelector(\"#colorsquare-picker\");\n    yPercentage = yPercentage.toFixed(2);\n    xPercentage = xPercentage.toFixed(2);\n    picker.style.top = yPercentage + \"%\";\n    picker.style.left = xPercentage + \"%\";\n    s = xPercentage / 100;\n    v = 1 - yPercentage / 100;\n    colorChange();\n    break;\n   case \"hue-event\":\n    xPercentage = (mouseX - 10 - trackedPos.x) / 220 * 100;\n    (xPercentage > 100) ? xPercentage = 100: (xPercentage < 0) ? xPercentage = 0 : null;\n    xPercentage = xPercentage.toFixed(2);\n    picker = document.querySelector(\"#hue-picker\");\n    picker.style.left = xPercentage + \"%\";\n    h = xPercentage / 100;\n    hueChange();\n    break;\n   case \"alpha-event\":\n    xPercentage = (mouseX - 10 - trackedPos.x) / 220 * 100;\n    (xPercentage > 100) ? xPercentage = 100: (xPercentage < 0) ? xPercentage = 0 : null;\n    xPercentage = xPercentage.toFixed(2);\n    picker = document.querySelector(\"#alpha-picker\");\n    picker.style.left = xPercentage + \"%\";\n    a = xPercentage / 100;\n    colorChange();\n    break;\n  }\n\n }\n\n}\n\nfunction touchMove(event) {\n if (tracked) {\n  let mouseX = event.touches[0].clientX;\n  let mouseY = event.touches[0].clientY;\n  let trackedPos = tracked.getBoundingClientRect();\n  let xPercentage, yPercentage, picker;\n  switch (tracked.id) {\n   case \"colorsquare-event\":\n    xPercentage = (mouseX - trackedPos.x) / 240 * 100;\n    yPercentage = (mouseY - trackedPos.y) / 160 * 100;\n    (xPercentage > 100) ? xPercentage = 100: (xPercentage < 0) ? xPercentage = 0 : null;\n    (yPercentage > 100) ? yPercentage = 100: (yPercentage < 0) ? yPercentage = 0 : null;\n    picker = document.querySelector(\"#colorsquare-picker\");\n    yPercentage = yPercentage.toFixed(2);\n    xPercentage = xPercentage.toFixed(2);\n    picker.style.top = yPercentage + \"%\";\n    picker.style.left = xPercentage + \"%\";\n    s = xPercentage / 100;\n    v = 1 - yPercentage / 100;\n    colorChange();\n    break;\n   case \"hue-event\":\n    xPercentage = (mouseX - 10 - trackedPos.x) / 220 * 100;\n    (xPercentage > 100) ? xPercentage = 100: (xPercentage < 0) ? xPercentage = 0 : null;\n    xPercentage = xPercentage.toFixed(2);\n    picker = document.querySelector(\"#hue-picker\");\n    picker.style.left = xPercentage + \"%\";\n    h = xPercentage / 100;\n    hueChange();\n    break;\n   case \"alpha-event\":\n    xPercentage = (mouseX - 10 - trackedPos.x) / 220 * 100;\n    (xPercentage > 100) ? xPercentage = 100: (xPercentage < 0) ? xPercentage = 0 : null;\n    xPercentage = xPercentage.toFixed(2);\n    picker = document.querySelector(\"#alpha-picker\");\n    picker.style.left = xPercentage + \"%\";\n    a = xPercentage / 100;\n    colorChange();\n    break;\n  }\n\n }\n\n}\n\nfunction csDown(event) {\n tracked = event.currentTarget;\n let xPercentage = ((event.offsetX + 1) / 240) * 100;\n let yPercentage = ((event.offsetY + 1) / 160) * 100;\n yPercentage = yPercentage.toFixed(2);\n xPercentage = xPercentage.toFixed(2)\n let picker = document.querySelector(\"#colorsquare-picker\");\n picker.style.top = yPercentage + \"%\";\n picker.style.left = xPercentage + \"%\";\n s = xPercentage / 100;\n v = 1 - yPercentage / 100;\n colorChange();\n}\n\nfunction csDownTouch(event) {\n tracked = event.currentTarget;\n let rect = event.target.getBoundingClientRect();\n let offsetX = event.targetTouches[0].clientX - rect.left;\n let offsetY = event.targetTouches[0].clientY - rect.top;\n let xPercentage = ((offsetX + 1) / 240) * 100;\n let yPercentage = ((offsetY + 1) / 160) * 100;\n yPercentage = yPercentage.toFixed(2);\n xPercentage = xPercentage.toFixed(2)\n let picker = document.querySelector(\"#colorsquare-picker\");\n picker.style.top = yPercentage + \"%\";\n picker.style.left = xPercentage + \"%\";\n s = xPercentage / 100;\n v = 1 - yPercentage / 100;\n colorChange();\n}\n\nfunction mouseUp(event) {\n tracked = null;\n}\n\nfunction hueDown(event) {\n tracked = event.currentTarget;\n let xPercentage = ((event.offsetX - 9) / 220) * 100;\n xPercentage = xPercentage.toFixed(2);\n let picker = document.querySelector(\"#hue-picker\");\n picker.style.left = xPercentage + \"%\";\n h = xPercentage / 100;\n hueChange();\n}\n\nfunction hueDownTouch(event) {\n tracked = event.currentTarget;\n let rect = event.target.getBoundingClientRect();\n let offsetX = event.targetTouches[0].clientX - rect.left;\n let xPercentage = ((offsetX - 9) / 220) * 100;\n xPercentage = xPercentage.toFixed(2);\n let picker = document.querySelector(\"#hue-picker\");\n picker.style.left = xPercentage + \"%\";\n h = xPercentage / 100;\n hueChange();\n}\n\nfunction hueChange() {\n let rgb = hsvToRgb(h, 1, 1)\n let colorsquare = document.querySelector(\".colorsquare\")\n colorsquare.style.background = `rgba(${rgb[0]},${rgb[1]},${rgb[2]},1)`;\n colorChange();\n}\n\nfunction colorChange() {\n let rgb = hsvToRgb(h, s, v);\n r = rgb[0];\n g = rgb[1];\n b = rgb[2];\n hexValue = RGBAToHex();\n let pickedColor = document.querySelector(\".color-picked\");\n pickedColor.style.background = `rgba(${rgb[0]},${rgb[1]},${rgb[2]},${a})`;\n colorChangeCallback();\n}\n\nfunction alphaDown(event) {\n tracked = event.currentTarget;\n let xPercentage = ((event.offsetX - 9) / 220) * 100;\n xPercentage = xPercentage.toFixed(2);\n let picker = document.querySelector(\"#alpha-picker\");\n picker.style.left = xPercentage + \"%\";\n a = xPercentage / 100;\n colorChange();\n}\n\nfunction alphaDownTouch(event) {\n tracked = event.currentTarget;\n let rect = event.target.getBoundingClientRect();\n let offsetX = event.targetTouches[0].clientX - rect.left;\n let xPercentage = ((offsetX - 9) / 220) * 100;\n xPercentage = xPercentage.toFixed(2);\n let picker = document.querySelector(\"#alpha-picker\");\n picker.style.left = xPercentage + \"%\";\n a = xPercentage / 100;\n colorChange();\n}\n\n//Math algorithms\nfunction hsvToRgb(h, s, v) {\n var r, g, b;\n\n var i = Math.floor(h * 6);\n var f = h * 6 - i;\n var p = v * (1 - s);\n var q = v * (1 - f * s);\n var t = v * (1 - (1 - f) * s);\n\n switch (i % 6) {\n  case 0:\n   r = v, g = t, b = p;\n   break;\n  case 1:\n   r = q, g = v, b = p;\n   break;\n  case 2:\n   r = p, g = v, b = t;\n   break;\n  case 3:\n   r = p, g = q, b = v;\n   break;\n  case 4:\n   r = t, g = p, b = v;\n   break;\n  case 5:\n   r = v, g = p, b = q;\n   break;\n }\n\n return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n}\n\nfunction RGBAToHex() {\n let rHex = r.toString(16);\n let gHex = g.toString(16);\n let bHex = b.toString(16);\n\n if (rHex.length == 1)\n  rHex = \"0\" + rHex;\n if (gHex.length == 1)\n  gHex = \"0\" + gHex;\n if (bHex.length == 1)\n  bHex = \"0\" + bHex;\n\n\n return (\"#\" + rHex + gHex + bHex).toUpperCase();\n}\n\nfunction rgbToHSV(r, g, b, update) {\n    let rperc, gperc, bperc,max,min,diff,pr,hnew,snew,vnew;\n    rperc = r / 255;\n    gperc = g / 255;\n    bperc = b / 255;\n    max = Math.max(rperc, gperc, bperc);\n    min = Math.min(rperc, gperc, bperc);\n    diff = max - min;\n\n    vnew = max;\n    (vnew == 0) ? snew = 0 : snew = diff / max ;\n\n    for (let i=0;i<3;i++) {\n      if ([rperc,gperc,bperc][i] === max) {\n        pr=i;\n        break;\n      }\n    }\n    if (diff==0) {\n      hnew = 0;\n      if (update) {\n        h=hnew;\n        s=snew;\n        v=vnew;\n        hueChange();\n        return;\n      }\n      else {\n        return {h:hnew,s:snew,v:vnew};\n      }\n    }\n    else {\n      switch (pr) {\n        case 0:\n          hnew=60*(((gperc-bperc)/diff)%6)/360\n          break;\n        case 1:\n          hnew=60*(((bperc-rperc)/diff)+2)/360\n          break;\n        case 2:\n          hnew=60*(((rperc-gperc)/diff)+4)/360\n          break;\n      }\n      if (hnew < 0) hnew+=6;\n    }\n\n    if (update) {\n      h=hnew;\n      s=snew;\n      v=vnew;\n      hueChange();\n    }\n    else {\n      return {h:hnew,s:snew,v:vnew};\n    }\n}\n</script>\n\n<style>\n.main-container {\n\twidth: 240px;\n\theight: 265px;\n\tbackground: #f2f2f2;\n\tborder-radius: 1px;\n\t-webkit-box-shadow: 0px 0px 4px 0px rgba(0, 0, 0, 0.51);\n\t-moz-box-shadow: 0px 0px 4px 0px rgba(0, 0, 0, 0.51);\n\tbox-shadow: 0px 0px 4px 0px rgba(0, 0, 0, 0.51);\n  -webkit-touch-callout: none;\n    -webkit-user-select: none;\n     -khtml-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n}\n\n.saturation-gradient {\n\tbackground: linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0));\n\twidth: 240px;\n\theight: 160px;\n}\n\n.value-gradient {\n\tbackground: linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0));\n\toverflow: hidden;\n\twidth: 240px;\n\theight: 160px;\n}\n\n.hue-selector {\n\tbackground: linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%);\n\tmargin: 15px 10px 10px 10px;\n\tborder-radius: 10px;\n\theight: 10px;\n}\n\n#hue-picker {\n\tbackground: #FFF;\n\twidth: 12px;\n\theight: 12px;\n\tborder-radius: 50%;\n\tleft: 0%;\n\tposition: relative;\n\tcursor: default;\n\ttransform: translate(-5px, -1px);\n\t-webkit-box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.67);\n\t-moz-box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.67);\n\tbox-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.67);\n}\n\n#hue-event {\n\twidth: 236px;\n\theight: 14px;\n\ttransform: translate(-8px, -14px);\n\tcursor: default;\n  touch-action: none;\n}\n\n.alpha-selector {\n\tbackground-image: linear-gradient(45deg, #808080 25%, transparent 25%), linear-gradient(-45deg, #808080 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #808080 75%), linear-gradient(-45deg, transparent 75%, #808080 75%);\n\tbackground-size: 10px 10px;\n\tbackground-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n\tmargin: 10px 10px;\n\tborder-radius: 10px;\n\theight: 10px;\n\tposition: relative;\n}\n\n#alpha-picker {\n\tbackground: #FFF;\n\twidth: 12px;\n\theight: 12px;\n\tborder-radius: 50%;\n\tleft: 100%;\n\tposition: relative;\n\tcursor: default;\n\ttransform: translate(-5px, -11px);\n\t-webkit-box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.67);\n\t-moz-box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.67);\n\tbox-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.67);\n}\n\n#alpha-event {\n\twidth: 236px;\n\theight: 14px;\n\ttransform: translate(-8px, -24px);\n\tcursor: default;\n  touch-action: none;\n}\n\n.alpha-value {\n\tbackground: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 1));\n\twidth: 100%;\n\theight: 100%;\n\tborder-radius: 10px;\n}\n\n.colorsquare {\n\tbackground: rgb(255, 0, 0);\n}\n\n#colorsquare-picker {\n\tmargin: 0;\n\tpadding: 0;\n\twidth: 12px;\n\theight: 12px;\n\tborder-radius: 50%;\n\tborder: 2px solid #FFFB;\n\tposition: relative;\n\ttransform: translate(-9px, -9px);\n\tleft: 100%;\n}\n\n#colorsquare-event {\n\twidth: 100%;\n\theight: 100%;\n\tposition: relative;\n\ttransform: translate(0, -16px);\n  touch-action: none;\n}\n\n.color-info-box {\n\tmargin: 10px;\n\twidth: 100%;\n\theight: 22px;\n\tvertical-align: middle;\n\tposition: relative;\n}\n\n.color-picked {\n\twidth: 18px;\n\theight: 18px;\n\tborder-radius: 2px;\n\tbackground: rgba(255, 0, 0, 1);\n\tdisplay: inline-block;\n}\n\n.color-picked-bg {\n\tbackground-image: linear-gradient(45deg, #808080 25%, transparent 25%), linear-gradient(-45deg, #808080 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #808080 75%), linear-gradient(-45deg, transparent 75%, #808080 75%);\n\tbackground-size: 10px 10px;\n\tbackground-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n\tborder: 2px solid #FFF;\n\tborder-radius: 4px;\n\twidth: 18px;\n\theight: 18px;\n\tcolor: #fff;\n\tdisplay: inline-block;\n}\n\n.hex-text-block {\n\tdisplay: inline-block;\n\tbackground: white;\n\tborder-radius: 2px;\n\tpadding: 2px;\n\tborder: 1px solid #e3e3e3;\n\theight: 16px;\n\twidth: 54px;\n\tvertical-align: top;\n\ttext-align: center;\n}\n\n.rgb-text-block {\n\tdisplay: inline-block;\n\tbackground: white;\n\tborder-radius: 2px;\n\tpadding: 2px;\n\tmargin: 0 1px;\n\tborder: 1px solid #dcdcdc;\n\theight: 16px;\n\twidth: 23px;\n\tvertical-align: top;\n\ttext-align: center;\n}\n\n.rgb-text-div {\n\tright: 10%;\n\tdisplay: inline-block;\n\tvertical-align: top;\n\tposition: absolute;\n}\n\n.text-label {\n\tposition: relative;\n\ttop: -12px;\n\tfont-family: sans-serif;\n\tfont-size: small;\n  color:#888;\n}\n\n.text {\n\tdisplay: inline;\n\tfont-family: sans-serif;\n\tmargin: 0;\n\tdisplay: inline-block;\n\tfont-size: 12px;\n\tfont-size-adjust: 0.50;\n\tposition: relative;\n\ttop: -1px;\n  vertical-align: middle;\n  -webkit-touch-callout: all;\n    -webkit-user-select: all;\n     -khtml-user-select: all;\n       -moz-user-select: all;\n        -ms-user-select: all;\n            user-select: all;\n}\n</style>\n\n<div class=\"main-container\">\n\n  <div class=\"colorsquare size\">\n      <div class=\"saturation-gradient\">\n          <div class=\"value-gradient\">\n              <div id=\"colorsquare-picker\"></div>\n              <div id=\"colorsquare-event\" on:mousedown={csDown} on:touchstart={csDownTouch}></div>\n          </div>\n      </div>\n  </div>\n\n  <div class=\"hue-selector\">\n      <div id=\"hue-picker\"></div>\n      <div id=\"hue-event\" on:mousedown={hueDown} on:touchstart={hueDownTouch}></div>\n  </div>\n\n  <div class=\"alpha-selector\">\n      <div class=\"alpha-value\"></div>\n      <div id=\"alpha-picker\"></div>\n      <div id=\"alpha-event\" on:mousedown={alphaDown} on:touchstart={alphaDownTouch}></div>\n  </div>\n\n  <div class=\"color-info-box\">\n    <div class=\"color-picked-bg\">\n      <div class=\"color-picked\"></div>\n    </div>\n\n    <div class=\"hex-text-block\">\n      <p class=\"text\">{hexValue}</p>\n    </div>\n\n    <div class=\"rgb-text-div\">\n      <div class=\"rgb-text-block\">\n        <p class=\"text\">{r}</p>\n        <p class=\"text-label\">R</p>\n      </div>\n\n      <div class=\"rgb-text-block\">\n        <p class=\"text\">{g}</p>\n        <p class=\"text-label\">G</p>\n      </div>\n\n      <div class=\"rgb-text-block\">\n        <p class=\"text\">{b}</p>\n        <p class=\"text-label\">B</p>\n      </div>\n    </div>\n  </div>\n\n</div>\n",
    "<script>\n  export let title = null;\n  export let viewBox;\n</script>\n\n<style>\n  svg {\n    stroke: currentColor;\n    fill: currentColor;\n    stroke-width: 0;\n    width: 100%;\n    height: auto;\n    max-height: 100%;\n  }  \n</style>\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" {viewBox}>\n  {#if title}\n    <title>{title}</title>\n  {/if}\n  <slot />\n</svg>\n",
    "<svelte:window\n  on:keydown={(e) => {\n    $ctrlKey = e.ctrlKey;\n    $shiftKey = e.shiftKey;\n    $metaKey = e.metaKey;\n    if(($skipKey && (e.key === 'Enter'))||(showComponent !== 'filemanager')) {\n      $keyProcess = true;\n    } else {\n      if($keyProcess) {\n        if($processKey !== null) $processKey(e);\n      }\n    }\n    $skipKey = false;\n  }}\n  on:keyup={(e) => {\n    $ctrlKey = e.ctrlKey;\n    $shiftKey = e.shiftKey;\n    $metaKey = e.metaKey;\n  }}\n  on:resize={(e) => {\n    midSize = window.innerHeight - 75;\n  }}\n/>\n\n<div\n  id='bodyContainer'\n>\n\n  <TitleBar />\n\n  <FileManager \n    on:switchView={switchView}\n    mid={midSize}\n  />\n\n  <StatusLine />\n</div>\n\n{#if showComponent === 'preferences'}\n  <Preferences\n    on:switchView={switchView}\n  />\n{/if}\n\n<style>\n  :global(body) {\n    padding: 0px;\n    margin: 0px;\n    width: 100%;\n    height: 100vh;\n    user-select: none;\n    overflow: hidden;\n  }\n\n  #bodyContainer {\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    width: 100%;\n    margin: 0px;\n    padding: 0px;\n    min-height: 100vh;\n    min-width: 100%;\n  }\n</style>\n\n<script>\n  import { onMount } from \"svelte\";\n  import FileManager from \"./components/FileManager.svelte\";\n  import Preferences from \"./components/Preferences.svelte\";\n  import StatusLine from './components/StatusLine.svelte';\n  import TitleBar from './components/TitleBar.svelte';\n  import { shiftKey } from \"./stores/shiftKey.js\";\n  import { ctrlKey } from \"./stores/ctrlKey.js\";\n  import { metaKey } from \"./stores/metaKey.js\";\n  import { altKey } from \"./stores/altKey.js\";\n  import { skipKey } from \"./stores/skipKey.js\";\n  import { processKey } from \"./stores/processKey.js\";\n  import { keyProcess } from './stores/keyProcess.js';\n\n  let showComponent = 'filemanager';\n  let midSize = null;\n\n  onMount(() => {\n    midSize = window.innerHeight - 75;\n  });\n\n  function switchView(v) {\n    showComponent = v.detail.view;\n  }\n</script>\n",
    "<div  id=\"commandPrompt\"\n      style=\"background-color: {$theme.backgroundColor};\n             color: {$theme.textColor};\n             width: {width !== null ? width : 100}px;\n             border-color: {util.pSBC(.1,$theme.backgroundColor)};\n             max-height: {getHeight()}px;\"\n             on:blur={(e) => { exitCP(); }}\n  >\n  <input \n          type=\"text\"\n          bind:this={promptInput}\n          bind:value={promptValue}\n          style=\"width: {width !== null ? width - 20 : '100'}px; \n          background-color: {$theme.textColor};\n          text-color: {$theme.backgroundColor};\"\n          on:keydown|capture|stopPropagation={processKey}\n          on:input|stopPropagation|preventDefault={processInput}\n  />\n  {#if filtered.length > 0}\n    <div  id=\"commandlist\"\n          bind:this={panelDOM}\n          style=\"max-height: {getHeight()-20}px;\"\n    >\n      <ul>\n      {#each filtered as command, index}\n        {#if index === current}\n          <li style=\"color: {$theme.commentColor};\">\n            <p>\n              <a href=\"/\"\n                 bind:this={currentDOM}\n                 on:click|preventDefault={(e) => { runCommand(command.name); }}\n              >\n                {command.name}\n              </a>\n            </p>\n            {#if showDescription}\n              <p class='description'\n                 style=\"color: {$theme.commentColor};\"\n              >\n                {command.description}\n              </p>\n            {/if}\n          </li>\n        {:else}\n          <li>\n            <a href=\"/\"\n               on:click|preventDefault={(e) => { runCommand(command.name); }}\n            >\n              {command.name}\n            </a>\n          </li>\n        {/if}\n      {/each}\n      </ul>\n    </div>\n  {/if}\n</div> \n\n<style>\n  #commandPrompt {\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    z-index: 500;\n    top: 20px;\n    left: 10px;\n    border: 3px solid;\n    border-radius: 5px;\n  }\n\n  #commandPrompt input {\n    outline-color: transparent;\n    margin: auto;\n    padding: 0px;\n    width: 100px;\n    border: 0px solid transparent;\n    margin: 10px auto;\n  }\n\n  #commandPrompt ul {\n    list-style: none;\n  }\n\n  #commandPrompt ul li a {\n    text-decoration: none;\n    color: inherit;\n  }\n\n  #commandlist {\n    overflow-y: scroll;\n    overflow-x: hidden;\n  }\n\n  .description {\n    margin: 5px 0px 10px 20px;\n  }\n</style>\n\n<script> \n  import { onMount, afterUpdate, tick, createEventDispatcher } from 'svelte';\n  import util from '../modules/util.js';\n  import { theme } from '../stores/theme.js';\n  import { keyProcess } from '../stores/keyProcess.js';\n\n  const dispatch = createEventDispatcher();\n\n  export let commands = null;\n\n  let showDescription = true;\n  let promptInput = null;\n  let promptValue = '';\n  let width = null;\n  let filtered = [];\n  let current = 0;\n  let panelDOM = null;\n  let currentDOM = null;\n\n  onMount(() => {\n    width = window.innerWidth - 30;\n    keyProcess.set(false);\n    if(commands != null) filtered = commands.commandList;\n  });\n\n  afterUpdate(async () => {\n    await tick();\n    promptInput.focus();\n  });\n  \n  async function exitCP(skip) {\n    if(typeof skip === 'undefined') skip = false;\n    await tick();\n    dispatch('closeCommandPrompt',{\n      skip: skip\n    });\n  }\n\n  async function processKey(e) {\n    // \n    // If the Enter key, quit the quick search.\n    //\n    switch(e.key) {\n      case 'Escape':\n        exitCP();\n        return(false);\n        break;\n      case 'ArrowUp': \n        current = current - 1;\n        if(current < 0) current = 0;\n        changeViewing();\n        break;\n      case 'j':\n        if(e.ctrlKey) {\n          current = current + 1;\n          if(current >= filtered.length) current = filtered.length - 1;\n          changeViewing();\n        }\n        break;\n      case 'k': \n        if(e.ctrlKey) {\n          current = current - 1;\n          if(current < 0) current = 0;\n          changeViewing();\n        }\n        break;\n      case 'ArrowDown': \n        current = current + 1;\n        if(current >= filtered.length) current = filtered.length - 1;\n        changeViewing();\n        break;\n      case 'Tab':\n        promptValue = filtered[current].name;\n        current = 0;\n        e.preventDefault();\n        e.stopPropagation();\n        break;\n      case 'Enter':\n        e.stopPropagation();\n        e.preventDefault();\n        if(commands !== null) commands.runCommand(filtered[current].name);\n        await tick();\n        exitCP(true);\n        break;\n    }\n    return(false);\n  }\n\n  function runCommand(cmd) {\n    if(commands !== null) commands.runCommand(cmd);\n    exitCP(false);\n  }\n\n  function processInput(e) {\n    if(commands !== null) filtered = commands.commandList;\n    var newPrompt = promptValue.toLowerCase().split('').join('.*');\n    filtered = filtered.filter(item => item.name.toLowerCase().match(newPrompt) !== null);\n    current = 0;\n  }\n\n  function getHeight() {\n    // \n    // The height of the window minus (status line + Directory + top location)\n    //\n    return window.document.body.clientHeight - 61;\n  }\n  \n  async function changeViewing() {\n    await tick();\n    var adj = panelDOM.clientHeight / 2;\n    panelDOM.scrollTop = currentDOM.offsetTop - adj;\n    if(panelDOM.scrollTop < 0) panelDOM.scrollTop = 0;\n  }\n\n</script>\n\n",
    "<div class='dirList'\n     bind:this={dirListDOM}\n>\n  {#if show}\n    <span class='dir' \n          on:dblclick={setEdit}\n          style='color: {$theme.Green};'\n    >\n      {newPath}\n    </span>\n  {:else}\n    <input bind:this={dirInputDOM} \n           type='text' \n           class='dirinputclass' \n           on:keydown|stopPropagation={processKey}\n           on:keyup|stopPropagation={(e) => {}}\n           on:keypress|stopPropagation={(e) => {}}\n           bind:value={inputPath} \n           on:blur={editOff}\n           on:input={processInput}\n    />\n    {#if (dirlist.length > 0) && (dirListDOM !== null) && (dirInputDOM !== null)}\n      <div id=\"searchList\"\n           style=\"background-color: {localTheme.backgroundColor}; color: {localTheme.textColor}; top: {dirInputDOM.offsetTop + dirListDOM.offsetHeight}px; left: {dirListDOM.offsetLeft}px;\"\n      >\n        <ul>\n          {#each dirlist as item, key}\n            {#if item !== ''}\n              <li style=\"color: {key === dirIndex ? localTheme.selectedColor : localTheme.textColor}\">\n                {item}\n              </li>\n            {/if}\n          {/each}\n        </ul>\n      </div>\n    {/if}\n  {/if}\n</div>\n\n<style>\n  #searchList {\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    z-index: 200;\n  }\n\n  #searchList ul {\n    list-style-type: none;\n    margin: 0px;\n    padding: 0px;\n  }\n\n  #searchList ul li {\n    text-decoration: none;\n    margin: 0px;\n    padding: 0px;\n  }\n\n  .dirList {\n    display: flex;\n    flex-direction: row;\n    margin: 0px;\n    padding: 0px;\n    height: 20px;\n  }\n\n  .dir {\n    height: 20px;\n    margin: 0px auto 0px 10px;\n    white-space: nowrap;\n    overflow-x: scroll;\n    direction: rtl;\n  }\n\n  .dirinputclass {\n    height: 20px;\n    margin: 0px auto 0px 10px;\n    white-space: nowrap;\n  }\n</style>\n\n<script>\n  import { tick, afterUpdate, onMount, createEventDispatcher } from 'svelte';\n  import { get } from 'svelte/store';\n  import { dirHistory } from '../stores/dirHistory.js';\n  import { keyProcess } from '../stores/keyProcess.js';\n  import { theme } from '../stores/theme.js';\n  import { directoryListeners } from '../stores/directoryListeners.js';\n  \n  const dispatch = createEventDispatcher();\n\n  export let path;\n  export let edit = false;\n\n  let show = true;\n  let dirInputDOM;\n  let newPath;\n  let inputPath;\n  let dirlist = [];\n  let localTheme = {};\n  let dirListDOM;\n  let tryagain = false;\n  let pending = false;\n  let dirIndex = 0;\n  let localDirListeners = [];\n  let lastDir = '';\n\n  $: newPath = shortenPath(path);\n  $: setEditFlag(edit);\n\n  onMount(() => {\n    const unsubscribeTheme = theme.subscribe((value) => {\n      localTheme = value;\n    });\n    const unsubscribeDirectoryListeners = directoryListeners.subscribe(value => {\n      localDirListeners = value;\n    });\n    localTheme = get(theme);\n    newPath = shortenPath(path);\n    return(() => {\n      unsubscribeTheme();\n      unsubscribeDirectoryListeners();\n    });\n  });\n\n  afterUpdate(async () => {\n    if(!show) {\n      await tick();\n      dirInputDOM.focus();\n    }\n  });\n\n  function updateWatcher(pth) {\n    //\n    // TODO\n    //\n    pth = pth;\n  }\n\n  function runDirectoryListeners(pth) {\n    if(typeof pth !== 'undefined') {\n      if(lastDir !== pth) {\n        lastDir = pth;\n        localDirListeners.map(value => {\n          value(pth,'');\n        });\n      }\n    }\n  }\n\n  function setEditFlag(flag) {\n    if(flag) {\n      setEdit({});\n    }\n  }\n\n  function setEdit(e) {\n    show = false;\n    inputPath = path.path;\n    dirIndex = 0;\n    const sep = path.fileSystem.sep;\n    if(inputPath[0] !== sep) {\n      inputPath = sep + inputPath;\n    }\n    if(inputPath[inputPath.length-1] !== sep) {\n      inputPath = inputPath + sep;\n    }\n    keyProcess.set(false);\n  }\n\n  function editOff(e) {\n    if(path.fileSystem.dirExists(inputPath)) {\n      show = true;\n      dirlist = [];\n      keyProcess.set(true);\n      dispatch('dirChange', {\n        path: inputPath,\n        cursor: true\n      });\n    } else if((typeof dirlist !== 'undefined')&&(dirlist.length-1 >= dirIndex)) {\n      inputPath = dirlist[dirIndex];\n      show = true;\n      dirlist = [];\n      keyProcess.set(true);\n      if(path.fileSystem.dirExists(inputPath)) {\n        dispatch('dirChange', {\n          path: inputPath,\n          cursor: true\n        });\n      }\n    }\n  }\n\n  function shortenPath(pth) {\n    //\n    // Leave if the system isn't fully initialized.\n    //\n    if(typeof pth.path === 'undefined') return;\n    if(pth.filesystem === null) return;\n\n    var result = pth.path.toString();\n\n    // \n    // Add directory watching.\n    //\n    updateWatcher(result);\n\n    // \n    // Tell everyone watching directory changes that a change is occurring.\n    // \n    runDirectoryListeners(result);\n      \n    // \n    // Add to the history.\n    // \n    var hist = get(dirHistory);\n    hist.addHistory(result);\n    dirHistory.set(hist);\n    window.dirhist = hist;\n\n    // \n    // Fixing the path.\n    //\n    if(pth.fileSystem !== null) {\n      const sep = pth.fileSystem.sep;\n      if(result[0] === sep) result = result.slice(1);\n      if(result[result.length-1] === sep) result = result.slice(0,-1);\n      var parts = result.split(sep);\n      if(parts.length > 3) {\n        // \n        // If the path length is greater than the shortener length, shorten the path \n        // by just showing the first character of the upper paths.\n        //\n        const boundry = parts.length - 3;\n        for(var i = 0; i < boundry; i++) {\n          parts[i] = parts[i][0];\n        }\n        result = parts.join(sep);\n      }\n        \n      // \n      // Make sure there is a path seperator on both sides of the path. Otherwise the\n      // rtl designator in the CSS will not show the path seperator for the beginning.\n      //\n      if(result[0] !== sep) result = sep + result;\n      if(result[result.length-1] !== sep) result += sep;\n    }\n\n    // \n    // Return the resulting path.\n    //\n    return(result);\n  }\n  \n  function processKey(e) {\n    const key = e.key;\n\n    // \n    // If the Enter key, quit the edit mode.\n    //\n    if((key === 'Escape')||(key === 'Enter')) {\n      editOff();\n    }\n\n    if(dirlist.length > 0) {\n      if(key === 'ArrowUp') {\n        e.stopPropagation();\n        dirIndex = dirIndex - 1;\n        if(dirIndex < 0) dirIndex = 0;\n      } else if(key === 'ArrowDown') {\n        e.stopPropagation();\n        dirIndex = dirIndex + 1;\n        if(dirIndex >= dirlist.length) dirIndex = dirlist.length;\n      }\n    }\n  }\n\n  function processInput(e) {\n    e = e;\n    if(pending) {\n      tryagain = true;\n    } else {\n      if(typeof path !== 'undefined') {\n        const sep = path.fileSystem.sep;\n        var searchPath = inputPath;\n        if(inputPath[inputPath.length-1] !== sep) {\n          var parts = inputPath.split(sep);\n          var pat = parts[parts.length - 1];\n          searchPath = parts.slice(0, parts.length-1).join(sep);\n          var numleft = 10;\n          dirlist = [];\n\n          // \n          // Get matches from history.\n          // \n          var hist = get(dirHistory);\n          dirlist = hist.searchHistory(pat);\n          if(dirlist === null) dirlist = [];\n          numleft -= dirlist.length;\n          if(numleft > 0) {\n            // \n            // Get more from dirctory.\n            //\n            tryagain = false;\n            pending = true;\n             \n            // \n            // Get rest from file system.\n            //\n            path.fileSystem.searchDir(pat, searchPath, numleft, (data) => {\n              dirlist = dirlist.concat(data);\n              pending = false;\n              dirIndex = 0;\n              if(tryagain) {\n                processInput(null);\n              }\n            });\n          }\n        }\n      }\n    }\n  }\n</script>\n",
    "{#if (((localCursor.pane === pane) && (localCursor.entry.name == entry.name))||(entry.selected))}\n<div class='entry' \n     style=\"background-color: {localTheme.cursorColor};\"\n     on:click={cursorToEntry(pane, entry, index)}\n     on:dblclick={openEntry(pane, entry, index)}\n     bind:this={DOM}\n     draggable=\"true\"\n     on:dragstart={dragStart}\n     on:dragend|preventDefault={(e) => { dropFiles(e,'dragend'); }}\n     on:drop|preventDefault={(e) => { dropFiles(e, 'drop'); }}\n     on:dragover|preventDefault={(e) => { dropFiles(e,'dragover'); }}\n     on:dragenter|preventDefault={(e) => {dropFiles(e, 'dragenter'); }}\n>\n  <span class='type'>\n    {#if entry.type === 0}\n      <FaRegFileAlt />\n    {:else if entry.type === 1}\n      <FaRegFolder />\n    {:else}\n      <FaExternalLinkAlt />\n    {/if}\n  </span>\n  <span class='name' style=\"color: {entry.selected ? localTheme.selectedColor : localTheme.textColor};\">{entry.name}</span> \n</div>\n{:else }\n<div class='entry' \n     style=\"background-color: 'transparent';\"\n     on:click={cursorToEntry(pane, entry, index)}\n     on:dblclick={openEntry(pane, entry, index)}\n     bind:this={DOM}\n     draggable=\"false\"\n     on:drop|preventDefault={(e) => { dropFiles(e, 'drop'); }}\n     on:dragover|preventDefault={(e) => { dropFiles(e,'dragover'); }}\n>\n  <span class='type'>\n    {#if entry.type === 0}\n      <FaRegFileAlt />\n    {:else if entry.type === 1}\n      <FaRegFolder />\n    {:else}\n      <FaExternalLinkAlt />\n    {/if}\n  </span>\n  <span class='name' \n        style=\"color: {entry.selected ? localTheme.selectedColor : localTheme.textColor};\"\n  >\n    {entry.name}\n  </span> \n</div>\n{/if}\n\n<style>\n  .entry {\n    display: flex;\n    flex-direction: row;\n    height: 20px;\n    max-height: 20px;\n    min-height: 20px;\n    width: 100%;\n    margin: 3px 3px;\n  }\n\n  .name {\n    white-space: nowrap;\n  }\n\n  .type {\n    height: 20px;\n    width: 20px;\n    min-height: 20px;\n    min-width: 20px;\n    max-height: 20px;\n    max-width: 20px;\n    margin: 0px 10px 0px 5px;\n  }\n</style>\n\n<script>\n  import { onMount, createEventDispatcher, tick } from 'svelte';\n  import { get } from 'svelte/store';\n  import { currentCursor } from '../stores/currentCursor.js';\n  import { theme } from '../stores/theme.js';\n  import { currentLeftFile } from '../stores/currentLeftFile.js';\n  import { currentRightFile } from '../stores/currentRightFile.js';\n  import { config } from '../stores/config.js';\n  import FaRegFolder from 'svelte-icons/fa/FaRegFolder.svelte';\n  import FaRegFileAlt from 'svelte-icons/fa/FaRegFileAlt.svelte';\n  import FaExternalLinkAlt from 'svelte-icons/fa/FaExternalLinkAlt.svelte'\n\n  export let pane;\n  export let entry;\n  export let index;\n  export let utilities;\n\n  const dispatch = createEventDispatcher();\n\n  let DOM;\n  let localCursor = {\n    pane: 'right',\n    entry: {\n      name: ''\n    }\n  };\n  let localTheme = {\n    cursorColor: 'pink'\n  };\n\n  onMount(() => {\n    var unsubscribeCurrentCursor = currentCursor.subscribe(async (value) => {\n      localCursor = value;\n      await tick();\n      if(typeof localCursor.entry !== 'undefined') {\n        if(typeof localCursor.entry.name !== 'undefined') {\n          if((localCursor.pane === pane) && (localCursor.entry.name == entry.name)) { \n            var viewable = elementInViewport(DOM);\n            if(!viewable.visible) {\n              dispatch('changeViewing', {\n                dom: DOM,\n                dir: viewable.dir\n              });\n            }\n          }\n        } else {\n          localCursor.entry = {\n            name: '',\n            size: '',\n            type: 'local',\n            dir: '',\n            datetime: '',\n            selected: false\n          };\n        }\n      } else {\n        localCursor.entry = {\n          name: '',\n          size: '',\n          type: 'local',\n          dir: '',\n          datetime: '',\n          selected: false\n        };\n      }\n    });\n    var unsubscribeTheme = theme.subscribe(value => {\n      localTheme = value;\n    });\n    return(() => {\n      unsubscribeCurrentCursor();\n      unsubscribeTheme();\n    })\n  });\n\n  function elementInViewport(el) {\n    var windowInner = window.innerHeight - 31;\n    var boundingEl = el.getBoundingClientRect();\n    return ({\n      visible: (boundingEl.top >= 60) && (boundingEl.bottom <= windowInner),\n      dir: (boundingEl.top < 60) ? boundingEl.top - 60 : boundingEl.bottom - windowInner\n    });\n  }\n\n  function cursorToEntry(pane, entry, index) {\n    currentCursor.set({\n      pane: pane,\n      entry: entry\n    });\n\n    if(pane === 'right') {\n      currentRightFile.set(\n        {\n          entry: entry\n        }\n      );\n    } else {\n      currentLeftFile.set(\n        {\n          entry: entry\n        }\n      )\n    }\n  }\n\n  async function openEntry(pane, entry, index) {\n    if(entry.type === 0) {\n      //\n      // It is a file, open it.\n      //\n      dispatch('openFile', { entry: entry});\n    } else {\n      //\n      // It is a directory. Go into it.\n      //\n      var newDir = await utilities.appendPath(entry.dir, entry.name);\n      dispatch('changeDir', {\n        path: newDir,\n        cursor: true \n      });\n    }\n  }\n\n  async function dragStart(e) {\n    if(e.shiftKey) {\n      e.dataTransfer.dropEffect = 'move';\n    } else {\n      e.dataTransfer.dropEffect = 'copy';\n    }\n    const lconfig = get(config);\n    var flist = lconfig.extensions.getExtCommand('getSelectedFiles').command();\n    var included = false;\n    var data = [];\n    flist.map(async item => {\n      const nfile = await utilities.appendPath(item.dir, item.name);\n      data.push(nfile + \"|\" + item.type);\n      if(item.name === entry.name) included = true;\n    });\n    const file = await utilities.appendPath(entry.dir, entry.name);\n    if(!included) {\n      data.push(file + \"|\" + entry.type);\n    }\n    e.dataTransfer.setData('text/plain', data.join('\\n'));\n    e.dataTransfer.setData('text/uri-url', \"file://\" + file);\n    e.dataTransfer.setData(\"text/x-moz-url\", \"file://\"+file);\n    e.dataTransfer.setData(\"application/x-moz-file-promise-url\", \"file://\" + file);\n  }\n  \n  async function dropFiles(e,type) {\n    var shiftKey = e.shiftKey;\n    switch(type) {\n      case 'over':\n        if(shiftKey) {\n          e.dataTransfer.dropEffect = 'move';\n        } else {\n          e.dataTransfer.dropEffect = 'copy';\n        }\n        break;\n      case 'drop':\n        // \n        // Create the drop to entry.\n        //\n        var dirPath = '';\n        var fileName = '';\n        var toEntry = {...entry};\n        if(toEntry.type === 1) {\n          toEntry.dir = await utilities.appendPath(toEntry.dir, toEntry.name);\n          toEntry.name = ''\n        }\n       \n        // \n        // Create the entries from the drop.\n        //\n        const dataTransArray = e.dataTransfer.getData('text/plain').split('\\n');\n        const lconfig = get(config);\n        var fromEntries = [];\n        dataTransArray.forEach(async dataTrans => {\n          const parts = dataTrans.split('|');\n          if(parts[1] === '1') {\n            dirPath = parts[0];\n            var fdir = await utilities.splitFilePath(dirPath);\n            const nwDir = await utilities.appendPath(toEntry.dir, fdir.name);\n            await utilities.makeDir(nwDir);\n            toEntry.dir = nwDir;\n          } else {\n            const result = await utilities.splitFilePath(parts[0]);\n            dirPath = result.dir;\n            fileName = result.name;\n          }\n          fromEntries.push({\n            dir: dirPath,\n            name: fileName,\n            fileSystemType: entry.fileSystemType,\n            fileSystem: entry.fileSystem\n          });\n        });\n        if(shiftKey) {\n          lconfig.extensions.getExtCommand('moveEntriesCommand').command(fromEntries, toEntry);\n        } else {\n          lconfig.extensions.getExtCommand('copyEntriesCommand').command(fromEntries, toEntry);\n        }\n        break;\n      default:\n        break;\n    }\n  }\n</script>\n",
    "{#if ((localConfig !== null) && (typeof localConfig.configuration.env !== 'undefined'))}\n  <table>\n    <thead>\n      <tr>\n        <th>\n        </th>\n        <th>\n        </th>\n        <th>\n          Name\n        </th>\n        <th>\n          Value\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      {#each Object.entries(localConfig.configuration.env) as kv}\n        <EnvTableRow \n          name={kv[0]}\n          value={kv[1]}\n          on:delete={(e) => { deleteCell(kv); }}\n          on:save={(e) => { saveCell(kv, e); }}\n        />\n      {/each}\n      {#if addNew}\n        <tr>\n          <td></td>\n          <td></td>\n          <td>\n            <input class=\"inputKV\" type='text' bind:value={KVname} />\n          </td>\n          <td>\n            <input class=\"inputKV\" type='text' bind:value={KVvalue} on:blur={addKV} />\n          </td>\n        </tr>\n      {:else}\n        <tr>\n          <td span=2>\n            <span class=\"addNewItem\" on:click={() => { addNew = true; }}>\n              +\n            </span>\n          </td>\n        </tr>\n      {/if}\n    </tbody>\n  </table>\n{/if}\n\n<style>\n  table {\n    margin-left: 10px;\n    user-select: text;\n  }\n\n  td, th {\n    text-align: left;\n  }\n\n  .addNewItem {\n    color: red;\n    cursor: pointer;\n    font-size: 20px;\n    margin-left: 10px;\n  }\n</style>\n\n<script>\n  import { onMount, createEventDispatcher } from 'svelte';\n  import EnvTableRow from './EnvTableRow.svelte';\n  import { config } from '../stores/config.js';\n  \n  const dispatch = createEventDispatcher();\n\n  let KVname = '';\n  let KVvalue = '';\n  let localConfig = null;\n  let addNew = false;\n   \n  onMount(() => {\n    const unsubConfig = config.subscribe(value => {\n      localConfig = value;\n    });\n\n    return(() => {\n      unsubConfig();\n    });\n  });\n  \n  function deleteCell(kv) {\n    delete localConfig.configuration.env[kv[0]];\n    config.set(localConfig);\n  }\n\n  function saveCell(kv, e) {\n    localConfig.configuration.env[kv[0]] = e.detail.value;\n    config.set(localConfig);\n  }\n\n  function addKV(e) {\n    localConfig.configuration.env[KVname] = KVvalue;\n    addNew = false;\n    config.set(localConfig);\n    KVname = '';\n    KVvalue = '';\n  }\n</script>\n",
    "<tr>\n  <td \n    class='editTD'\n    on:click={editCell}\n  >\n    <span>\n      üñãÔ∏è\n    </span>\n  </td>\n  <td\n    class='deleteTD'\n    on:click={deleteCell}\n  >\n    <span>\n      ‚ùå\n    </span>\n  </td>\n  <td>{name}</td>\n  {#if editValue}\n    <input\n      bind:value={inputValue}\n      on:blur={saveInput}\n    />\n  {:else}\n    <td>{value}</td>\n  {/if}\n</tr>\n\n<style>\n  input {\n    width: 100%;\n  }\n\n  .editTD {\n    margin-left: 10px;\n    cursor: pointer;\n  }\n\n  .deleteTD {\n    margin-left: 10px;\n    cursor: pointer;\n  }\n</style>\n\n<script>\n  import { createEventDispatcher } from 'svelte';\n\n  const dispatch = createEventDispatcher();\n\n  export let name;\n  export let value;\n\n  let inputValue = '';\n  let editValue = false;\n\n  function editCell() {\n    inputValue = value;\n    editValue = true;\n  }\n\n  function saveInput() {\n    value = inputValue;\n    editValue = false;\n    dispatch('save', {\n      value: inputValue\n    });\n  }\n\n  function deleteCell() {\n    dispatch('delete',{});\n  }\n</script>\n",
    "<div\n  id='extension' \n  bind:this={scrollDOM}\n>\n  {#if showMsgBox}\n    <div\n      id=\"msgBoxExt\"\n      style=\"background-color: {$theme.backgroundColor};\n             color: {$theme.textColor};\n             border-color: {$theme.textColor};\n             font-family: {$theme.font};\n             font-size: {$theme.fontSize};\"\n    >\n      <h3>{msgTitle}</h3>\n      <p>{msgText}</p>\n      <button\n        style=\"color: {$theme.backgroundColor};\n               background-color: {$theme.textColor};\n               font-family: {$theme.font};\n               font-size: {$theme.fontSize};\"\n        on:click={() => {\n            showMsgBox = false;\n        }}\n      >\n        Okay\n      </button>\n    </div>\n  {/if}\n  {#if extensionList !== null}\n    <table\n      id='extensionTable'\n    >\n      <thead>\n        <tr>\n          <th>\n            Extension Name\n          </th>\n          <th>\n          </th>\n          <th>\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        {#each extensionList as item}\n          <tr>\n            <td>\n              {item.name}\n            </td>\n            <td>\n              <button \n                style=\"color: {$theme.backgroundColor};\n                       background-color: {$theme.textColor};\n                       font-family: {$theme.font};\n                       font-size: {$theme.fontSize};\"\n                class='editButton'\n                on:click={()=>{\n                    editExtension(item);\n                }}\n              >\n                Edit\n              </button>\n            </td>\n            <td>\n              <button \n                class='deleteButton'\n                on:click={()=>{\n                    deleteExtension(item);\n                }}\n              >\n                Delete\n              </button>\n            </td>\n          </tr>\n        {/each}\n      </tbody>\n    </table>\n  {/if}\n  <div\n    class='row'\n  >\n    <label \n      for='extensionNameInput' \n    >\n      New Extension Name:\n    </label>\n    <input \n      id='extensionNameInput' \n      style=\"color: {$theme.backgroundColor};\n             background-color: {$theme.textColor};\n             font-family: {$theme.font};\n             font-size: {$theme.fontSize};\"\n      bind:value={extensionName}\n      on:mouseover={() => {\n        setFocus(false);\n      }}\n      on:mouseleave={() => {\n        setFocus(true);\n      }}\n      on:blur={()=>{\n        setFocus(true);\n      }}\n    />\n    <button \n      id='createExtensionButton'\n      style=\"color: {$theme.backgroundColor};\n             background-color: {$theme.textColor};\n             font-family: {$theme.font};\n             font-size: {$theme.fontSize};\"\n      on:click={createExtension}\n    >\n      Create New Extension\n    </button>\n  </div>\n</div>\n\n<style>\n  #extension {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    margin: 0px 0px 0px 10px;\n    overflow-y: auto;\n    overflow-x: hidden;\n  }\n\n  #createExtensionButton {\n    padding: 5px;\n    margin: 0px 10px;\n    border: solid 1px transparent;\n    border-radius: 5px;\n  }\n  \n  #msgBoxExt {\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    border: solid 2px;\n    border-radius: 10px;\n    top: 25%;\n    left: 25%;\n    width: 50%;\n    padding: 10px;\n  }\n\n  #msgBoxExt button {\n    border: solid 1px;\n    border-radius: 10px;\n    width: 50%;\n    margin: auto;\n  }\n\n  #extensionTable {\n    width: 100%;\n    margin: 20px 0px 20px 0px;\n  }\n\n  #extensionNameInput {\n    margin: 0px 10px;\n  }\n\n  label {\n    margin: auto 10px;\n  }\n\n  .deleteButton {\n    border: solid 1px transparent;\n    border-radius: 10px;\n    background: red;\n    color: black;\n  }\n  \n  .editButton {\n    padding: 5px;\n    margin: 0px 10px;\n    border: solid 1px transparent;\n    border-radius: 5px;\n  }\n\n  .row {\n    display: flex;\n    flex-direction: row;\n    margin: 10px;\n  }\n</style>\n\n<script>\n  import { onMount, afterUpdate, createEventDispatcher } from 'svelte';\n  import { get } from 'svelte/store';\n  import { rightDir } from '../stores/rightDir.js';\n  import { leftDir } from '../stores/leftDir.js';\n  import { currentCursor } from '../stores/currentCursor.js';\n  import { theme } from '../stores/theme.js';\n  import { config } from '../stores/config.js';\n\t\n  const dispatch = createEventDispatcher();\n\n  let localConfig = null;\n  let showMsgBox = false;\n  let msgText = '';\n  let msgTitle = '';\n  let extensionList = null;\n  let extensionName = '';\n  let extTemplate = `\nconst {{extName}} = {\n  extMan: null,\n  init: function(extManager) {\n    {{extName}}.extMan = extManager;\n  },\n  installKeyMaps: function() {\n  }\n};\nreturn({{extName}});\n  `;\n  let scrollDOM = null;\n  let first = true;\n\n  onMount(() => {\n    const unsubConfig = config.subscribe(async (value) => {\n      localConfig = value;\n      if(typeof localConfig.localFS !== 'undefined') {\n        const efile = await localConfig.localFS.appendPath(localConfig.configDir,'extensions');\n        extensionList = await localConfig.localFS.getDirList(efile);\n      }\n    });\n    \n    return(() => {\n      unsubConfig();\n    })\n  });\n\n  afterUpdate(() => {\n    if((scrollDOM !== null)&&(first)) {\n      dispatch('setScrollDOM', {\n        DOM: scrollDOM\n      });\n      first = false;\n    }\n  });\n\n  async function reloadExtensions() {\n    const efile = await localConfig.localFS.appendPath(localConfig.configDir,'extensions');\n    extensionList = await localConfig.localFS.getDirList(efile);\n  }\n\n  async function editExtension(ext) {\n    // \n    // Get the extensions file.\n    //\n    var extDir = await localConfig.localFS.appendPath(localConfig.configDir,'extensions');\n    extDir = await localConfig.localFS.appendPath(extDir, ext.name);\n    const pfile = await localConfig.localFS.appendPath(extDir, 'package.json');\n    var pkgConfig = JSON.parse(await localConfig.localFS.readFile(pfile));\n    if(typeof pkgConfig.mfmextension !== 'undefined') {\n      var extFile = pkgConfig.mfmextension.main;\n\n      // \n      // Put the unused pane with the extension's directory \n      //\n      var curcursor = get(currentCursor);\n      curcursor.entry.dir = extDir;\n      curcursor.entry.name = extFile;\n      if(curcursor.pane === 'left') {\n        rightDir.set({\n          path: extDir,\n          fileSystem: localConfig.localFS,\n          fileSystemType: 'local'\n        });\n        curcursor.pane = 'right';\n      } else {\n        leftDir.set({\n          path: extDir,\n          fileSystem: localConfig.localFS,\n          fileSystemType: 'local'\n        });\n        curcursor.pane = 'left';\n      }\n      currentCursor.set(curcursor);\n\n      if(await localConfig.localFS.fileExists(localConfig.userEditor)) {\n        //\n        // There is an editor defined by the user. Use it.\n        //\n        var file = await localConfig.localFS.appendPath(extDir, extFile);\n        var editor = await localConfig.localFS.readFile(localConfig.userEditor).toString().trim();\n        if(editor.endsWith('.app')) {\n          await localConfig.localFS.openFileWithProgram(editor, file);\n        } else {\n          //\n          // It is a command line editor. Open specially.\n          //\n          if(editor === 'emacs') {\n            //\n            // Open emacs.\n            //\n            await localConfig.localFS.runCommandLine('emacsclient -n -q \"' + file + '\"');\n          } else {\n            //\n            // Open in a terminal program.\n            //\n            await localConfig.localFS.openInTerminal(editor, file);\n          }\n        }\n      } else {\n        //\n        // Open with the system default editor.\n        //\n        await localConfig.localFS.runCommandLine('open \"' + file + '\"');\n      }\n\n      //\n      // Go back to the filemanager view.\n      //\n      dispatch('switchView', {\n        view: 'filemanager'\n      });\n    } else {\n      console.log('Not a proper Extension.');\n      msgText = 'The extension, ' + extensionName + ', isn\\'t properly created. Please fix.';\n      msgTitle = 'Extension Preferences';\n      showMsgBox = true;\n      extensionName = '';\n    }\n  }\n\n  async function createExtension() {\n    var extDir = await localConfig.localFS.appendPath(localConfig.configDir,'extensions');\n    extDir = await localConfig.localFS.appendPath(extDir, extensionName);\n    if(! await localConfig.localFS.dirExists(extDir)) {\n      await localConfig.localFS.createDir(extDir);\n      await localConfig.localFS.runCommandLine('cd \"' + extDir + '\"; npm init -y;', (err, stdout) => {\n        if(err) {\n          // \n          // An error, show to console.\n          // \n          console.log(err);\n          console.log(stdout);\n        } else {\n          editPackage();\n        }\n      });\n    } else {\n      // \n      // The extension exists. Tell the user to update a theme instead.\n      // \n      msgText = 'The extension, ' + extensionName + ', already exists. Please edit it instead of creating it.';\n      msgTitle = 'Extension Preferences';\n      showMsgBox = true;\n      extensionName = '';\n    }\n  }\n\n  async function editPackage() {\n    // \n    // Svelte compiler will not pull from the local closure for some reason. Therefore, \n    // I have to create this variable.\n    //\n    var extDir = await localConfig.localFS.appendPath(localConfig.configDir,'extensions');\n    extDir = await localConfig.localFS.appendPath(extDir, extensionName);\n\n    // \n    // Add the needed fields to the package.json file for Modal File Manager.\n    // \n    var fileName = await localConfig.localFS.appendPath(extDir, 'package.json');\n    var pkgConfig = JSON.parse(await localConfig.localFS.readFile(fileName));\n    \n    // \n    // Set the extension script to the 'main' property as well.\n    //\n    pkgConfig.main = extensionName + '.js';\n    \n    // \n    // Create the mfmextension substructure.\n    //\n    pkgConfig.mfmextension = {\n      name: extensionName,\n      description: '',\n      type: 0,\n      github: '',\n      main: extensionName + '.js'\n    };\n    const pfile = await localConfig.localFS.appendPath(extDir, 'package.json');\n    await localConfig.localFS.writeFile(pfile, JSON.stringify(pkgConfig));\n    \n    // \n    // Create the actual extension file.\n    // \n    var extFile = await localConfig.localFS.appendPath(extDir,extensionName + '.js');\n    var newExt = extTemplate.replaceAll('{{extName}}', extensionName);\n    await localConfig.localFS.writeFile(extFile, newExt);\n\n    // \n    // Edit the extension.\n    //\n    editExtension({\n      dir: extDir,\n      name: extensionName\n    });\n  }\n\n  async function deleteExtension(ext) {\n    var extDir = await localConfig.localFS.appendPath(localConfig.configDir,'extensions');\n    await localConfig.localFS.deleteEntries({\n      dir: extDir,\n      name: ext.name,\n      fileSystem: localConfig.localFS\n    }, (err,stdout) => {\n      if(!err) {\n        reloadExtensions();\n      } else {\n        msgText = 'The extension, ' + ext.name + ', can\\'t be deleted.';\n        msgTitle = 'Extension Preferences';\n        showMsgBox = true;\n        console.log(err);\n        console.log(stdout);\n      }\n    });\n  }\n  \n  function setFocus(flag) {\n    dispatch('setKeyProcess', {\n      blur: flag\n    });\n  }\n</script>\n",
    "<div \n  id=\"extrapanel\"\n  bind:this={extraPDOM}\n>\n  {#if isExtra}\n    {@html extraHTML}\n  {/if}\n  <h6>{ fullPath }</h6>\n  {#if (extension === '.png') ||\n      (extension === '.jpg')  ||\n      (extension === '.svg')  ||\n      (extension === '.jpeg') ||\n      (extension === '.gif')  ||\n      (extension === '.apng') ||\n      (extension === '.avif') ||\n      (extension === '.webp') ||\n      (extension === '.avi')}\n    <img src=\"file://{fullPath}\"\n         alt=\"{fullPath}\"\n    >\n  {:else if isMovieFlag}\n    <video id='videoItem'\n           controls \n    >\n      <track kind=\"captions\">\n    </video>\n    <p>\n      Dimensions:  {videoDem}\n    </p>\n  {/if}\n  <div class='stats'>\n    <p>Date: {localCurrentCursor.entry.datetime}</p>\n    <p>Size: {size}</p>\n  </div>\n</div>\n\n<style> \n  #extrapanel {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    margin: 0px;\n    padding: 5px;\n    overflow-y: auto;\n    overflow-wrap: anywhere;\n    word-break: break-all;\n }\n\n #extrapanel img {\n     width: 100%;\n }\n\n .stats {\n     display: flex;\n     flex-direction: column;\n }\n\n .stats p {\n     margin: 5px 0px 0px 0px;\n }\n</style>\n\n<script>\n  import { onMount, afterUpdate, tick } from 'svelte';\n  import { currentCursor } from '../stores/currentCursor.js';\n  import { extraPanel } from '../stores/extraPanel.js';\n  import util from '../modules/util.js';\n\n  export let side = '';\n\n  let extraPDOM = null;\n  let localCurrentCursor = {\n    pane: 'left',\n    entry: {}\n  };\n  let localExtraPanel = [];\n  let fullPath = '';\n  let extension = '';\n  let size = '';\n  let videoDem = '';\n  let isMovieFlag = false;\n  let isExtra = false;\n  let extraHTML = '';\n\n  onMount(() => {\n    // \n    // Subscribe to the current cursor in order to get the file information.\n    //\n    var unsubscribeCurrentCursor = currentCursor.subscribe((value) => {\n      // \n      // Get the file information needed.\n      //\n      localCurrentCursor = value;\n      fullPath = localCurrentCursor.entry.fileSystem.appendPath(localCurrentCursor.entry.dir, localCurrentCursor.entry.name);\n      extension = localCurrentCursor.entry.fileSystem.getExtension(localCurrentCursor.entry.name).toLowerCase();\n      size = util.readableSize(localCurrentCursor.entry.size);\n\n      //\n      // Check the new cursor for extra panel items.\n      //\n      isExtra = checkExtraPanel();\n    });\n\n    // \n    // See if the exta panel has information.\n    //\n    var unsubscribeExtraPanel = extraPanel.subscribe(value => {\n      localExtraPanel = value;\n      isExtra = checkExtraPanel();\n    });\n\n    // \n    // Return the function to unsubscribe to the stores.\n    //\n    return(() => {\n      unsubscribeCurrentCursor();\n      unsubscribeExtraPanel();\n    })\n  });\n  \n  afterUpdate(async () => {\n    if(isMovie()) {\n      await tick();\n      var file = new File(localCurrentCursor.entry.dir, localCurrentCursor.entry.name);\n      var fileURL = window.URL.createObjectURL(file);\n      var videoNode = window.document.getElementById('videoItem');\n      if(videoNode !== null) {\n        videoNode.src = fileURL;\n      }\n      getDimensions(fullPath);\n    }\n    if(!isExtra) {\n      isExtra = checkExtraPanel();\n    } else {\n      localExtraPanel.forEach(item => {\n        item.after();\n      });\n    }\n  });\n\n  function checkExtraPanel() {\n    localExtraPanel.forEach(item => {\n      isExtra = item.check(localCurrentCursor.entry.dir, localCurrentCursor.entry.name, localCurrentCursor.fileSystem, side);\n      if(isExtra) {\n        extraHTML = item.createHTML();\n      }\n    });\n    return(isExtra);\n  }\n\n  function isMovie() {\n    isMovieFlag = ((extension === '.mov')  || \n                   (extension === '.mp4')  || \n                   (extension === '.wm')   ||\n                   (extension === '.3gp')  ||\n                   (extension === '.mpeg') ||\n                   (extension === '.avi')  ||\n                   (extension === '.gif')  ||\n                   (extension === '.ogg'));\n    return(isMovieFlag);\n  }\n\n  function getDimensions(fileName) {\n    var com = 'ffprobe -v error -of flat=s=_ -select_streams v:0 -show_entries stream=height,width \"' + fileName + '\"';\n    localCurrentCursor.entry.fileSystem.runCommandLine(com, (err, stdout) => {\n      if(err) {\n        console.log(err);\n      } else {\n        var stdout = stdout.toString('utf8');\n        var width = /width=(\\d+)/.exec(stdout);\n        var height = /height=(\\d+)/.exec(stdout);\n        videoDem = parseInt(width[1]) + \"x\" + parseInt(height[1]);\n      }\n    });\n  }\n</script>\n",
    "<div id='container'\n  style=\"background-color: {$theme.backgroundColor};\n         color: {$theme.textColor};\n         font-family: {$theme.font};\n         font-size: {$theme.fontSize};\n         height: {mid}px;\"\n  on:mousemove={mouseMove}\n  on:mouseup={e => {\n    mdown = false;\n  }}\n  bind:this={containerDOM}\n>\n\n  {#if showGitHub}\n    <GitHub \n      on:closeGitHub={(e) => {\n        toggleGitHub();\n      }}\n    />\n  {/if}\n\n  {#if showCommandPrompt}\n    <CommandPrompt \n\ncommands={commands}\n      on:closeCommandPrompt={(e) => {\n        showCommandPrompt = false;\n        if(!showMessageBox) {\n          $keyProcess = true;\n        }\n        if(e.detail.skip) $skipKey = true;\n      }}\n    />\n  {/if}\n\n  {#if showMessageBox}\n    <MessageBox\n      config={msgBoxConfig}\n      spinners={msgBoxSpinners}\n      items={msgBoxItems}\n      on:msgReturn={msgReturn}\n      on:closeMsgBox={(e) => { \n        showMessageBox = false;\n        $keyProcess = true;\n        if(e.detail.skip) $skipKey = true;\n      }}\n    />\n  {/if}\n\n  {#if showQuickSearch}\n    <QuickSearch\n      leftDOM={leftDOM}\n      rightDOM={rightDOM}\n      leftEntries={leftEntries}\n      rightEntries={rightEntries}\n      on:changeEntries={qsChangeEntries}\n      on:closeQuickSearch={(e) => { \n        showQuickSearch = false;\n        $keyProcess = true;\n        if(e.detail.skip) $skipKey = true;\n      }}\n    />\n  {/if}\n\n  <div id='leftSide'\n       bind:this={leftDOM}>\n    {#if (localCurrentCursor.pane === 'right')&&(showExtra)}\n      <ExtraPanel\n        side = 'left'\n      />\n    {:else}\n      <DirectoryListing\n        path={localLeftDir}\n        edit={setEditDirFlagLeft}\n        on:dirChange={(e) => { changeDir(e.detail, 'left', ''); setEditDirFlagLeft = false; }}\n        on:updateDir={(e) => { refreshLeftPane(); }}\n      />\n      <Pane \n        pane='left'\n        entries={leftEntries}\n        utilities={localLeftDir.fileSystem}\n        on:changeDir={(e) => { changeDir(e.detail.dir, e.detail.pane, ''); }}\n        on:openFile={(e) => { openFile(e.detail.entry); }}\n      />\n    {/if}\n  </div>\n  <ResizeBorder \n    on:mouseDown={(e) => {mdown = e.detail;}}\n  />\n  <div id='rightSide'\n       bind:this={rightDOM}\n  >\n    {#if (localCurrentCursor.pane === 'left')&&(showExtra)}\n      <ExtraPanel\n        side='right'\n      />\n    {:else}\n      <DirectoryListing\n        path={localRightDir}\n        edit={setEditDirFlagRight}\n        on:dirChange={(e) => { changeDir(e.detail, 'right',''); setEditDirFlagRight = false; }}\n        on:updateDir={(e) => { refreshRightPane(); }}\n      />\n      <Pane \n        pane='right'\n        entries={rightEntries}\n        utilities={localRightDir.fileSystem}\n        on:changeDir={(e) => {changeDir(e.detail.dir, e.detail.pane,''); }}\n        on:openFile={(e) => { openFile(e.detail.entry); }}\n      />\n    {/if}\n  </div>\n</div>\n\n<style>\n  #leftSide {\n    display: flex;\n    flex-direction: column;\n    padding: 0px;\n    margin: 0px;\n    width: 50%;\n  }\n  \n  #rightSide {\n    display: flex;\n    flex-direction: column;\n    padding: 0px;\n    margin: 0px;\n    width: 50%;\n  }\n\n  #container {\n    padding: 0px;\n    margin: 0px;\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    flex-grow: 1;\n  }\n</style>\n\n<script>\n  import { onMount, tick, createEventDispatcher } from 'svelte';\n  import { get } from 'svelte/store';\n  import Pane from '../components/Pane.svelte';\n  import MessageBox from '../components/MessageBox.svelte';\n  import DirectoryListing from '../components/DirectoryListing.svelte';\n  import ResizeBorder from '../components/ResizeBorder.svelte';\n  import QuickSearch from '../components/QuickSearch.svelte';\n  import ExtraPanel from '../components/ExtraPanel.svelte';\n  import CommandPrompt from '../components/CommandPrompt.svelte';\n  import GitHub from '../components/GitHub.svelte';\n  import { currentCursor } from '../stores/currentCursor.js';\n  import { currentLeftFile } from '../stores/currentLeftFile.js';\n  import { currentRightFile } from '../stores/currentRightFile.js';\n  import { theme } from '../stores/theme.js';\n  import { inputState } from '../stores/inputState.js';\n  import { leftDir } from '../stores/leftDir.js';\n  import { rightDir } from '../stores/rightDir.js';\n  import { keyProcess } from '../stores/keyProcess.js';\n  import { config } from '../stores/config.js';\n  import { dirHistory } from '../stores/dirHistory.js';\n  import { directoryListeners } from '../stores/directoryListeners.js';\n  import { stateMapColors } from '../stores/stateMapColors.js';\n  import { extraPanel } from '../stores/extraPanel.js';\n  import commands from '../modules/commands.js';\n  import filesystems from '../modules/filesystems';\n  import extensions from '../modules/extensions.js';\n  import OS from '../modules/OS.js';\n  import { altKey } from '../stores/altKey.js';\n  import { ctrlKey } from '../stores/ctrlKey.js';\n  import { metaKey } from '../stores/metaKey.js';\n  import { skipKey } from '../stores/skipKey.js';\n  import { shiftKey } from '../stores/shiftKey.js';\n  import { processKey } from \"../stores/processKey.js\";\n\n\tconst dispatch = createEventDispatcher();\n\n  export let mid;\n\n  let showMessageBox = false;\n  let showQuickSearch = false;\n  let msgBoxConfig = {};\n  let msgBoxSpinners = [];\n  let msgBoxItems = null;\n  let msgCallBack = (e) => {};\n  let configDir = \"\";\n  let localConfig = null;\n  let setEditDirFlagLeft = false;\n  let setEditDirFlagRight = false;\n  let showExtra = false;\n  let showCommandPrompt = false;\n  let leftEntries = {};\n  let rightEntries = {};\n  let localCurrentCursor = {\n    pane: 'left',\n    entry: {}\n  };\n  let localCurrentLeftFile = {};\n  let localCurrentRightFile = {};\n  let localTheme = {};\n  let localState = 'normal';\n  let localLeftDir = {\n    fileSystemType: 'macOS',\n    fileSystem: null,\n    path: ''\n  };\n  let localRightDir = {\n    fileSystemType: 'macOS',\n    fileSystem: null,\n    path: ''\n  };\n  let rightDOM = null;\n  let leftDOM = null;\n  let containerDOM = null;\n  let mdown = false;\n  let lastError = null;\n  let userEditor = '.myeditorchoice';\n  let OStype = 'macOS';\n  let stateMaps = [];\n  let localStateMapColors = [];\n  let showGitHub = false;\n  let numberAcc = '';\n  let lastCommand = '';\n  let flagFilter = 1;\n\n  onMount(async () => {\n    //\n    // Initialize all the stores with minimal settings.\n    //\n    $keyProcess = true;\n    $inputState = 'normal';\n    $theme = {};\n    $currentCursor = {};\n    $currentRightFile = {};\n    $currentLeftFile = {};\n    $rightDir = {};\n    $leftDir = {};\n    $directoryListeners = [];\n    $stateMapColors = [];\n    $config = {};\n    $processKey = processKeyFunction;\n\n    //\n    // reset all the extensions and commands.\n    //\n    clearCommands();\n    clearExtensions();\n    clearKeyboard();\n\n    //\n    // Initialize local.\n    //\n    OS.init();\n    OS.setDirFirst(true);\n\n    // \n    // Setup the configuration directory.\n    //\n    configDir = await OS.getConfigDir();\n    if(! await OS.dirExists(configDir)) {\n      await OS.makeDir(configDir);\n      await OS.makeDir({\n        dir: configDir,\n        name: 'extensions',\n        fileSystem: OS\n      });\n    }\n\n    // \n    // Load the configuration file.\n    // \n    if(! await OS.fileExists(await OS.appendPath(configDir,'config.json'))) {\n      //\n      // Create the default configuration and save it.\n      //\n      localConfig = await OS.getConfig();\n      const cfgFile = await OS.appendPath(configDir,'config.json');\n      await OS.writeFile(cfgFile, JSON.stringify(localConfig));\n    } else {\n      //\n      // Read in the local configuration.\n      //\n      var configFile = await OS.appendPath(configDir,'config.json');\n      localConfig = await OS.readFile(configFile);\n      localConfig = JSON.parse(localConfig);\n    }\n\n    //\n    // Here, we are subscribing to the different stores and setting their \n    // default values;\n    //\n    var unsubscribeLeftDir = leftDir.subscribe(value => {\n      localLeftDir = value;\n    });\n    var unsubscribeRightDir = rightDir.subscribe(value => {\n      localRightDir = value;\n    });\n    \n    //\n    // Setup the application to be in the user's home directory.\n    //\n    localLeftDir.path = await OS.getHomeDir();\n    localLeftDir.fileSystemType = OStype;\n    localLeftDir.fileSystem = OS;\n    localRightDir.path = localLeftDir.path;\n    localRightDir.fileSystemType = OStype;\n    localRightDir.fileSystem = OS;\n\n    //\n    // Get the files.\n    //\n    leftEntries = await OS.getDirList(localLeftDir.path);\n    rightEntries = await OS.getDirList(localRightDir.path);\n\n    //\n    // Set the stores to their proper value.\n    //\n    $leftDir = localLeftDir;\n    $rightDir = localRightDir;\n \n    var unsubscribeCurrentCursor = currentCursor.subscribe(value => {\n      localCurrentCursor = value;\n    });\n    $currentCursor = {\n      pane: 'left',\n      entry: leftEntries[0]\n    };\n    var unsubscribeCurrentLeftFile = currentLeftFile.subscribe(value => {\n      localCurrentLeftFile = value;\n    });\n    $currentLeftFile = {\n      entry: leftEntries[0]\n    };\n    var unsubscribeCurrentRightFile = currentRightFile.subscribe(value => {\n      localCurrentRightFile = value;\n    });\n    $currentRightFile = {\n      entry: rightEntries[0]\n    };\n    var unsubscribeTheme = theme.subscribe(async value => {\n      // \n      // Make sure a proper theme is being set.\n      // \n      if(typeof value.backgroundColor !== 'undefined') {\n        //\n        // Keep a local copy.\n        // \n        localTheme = value;\n \n        // \n        // Save the new theme values.\n        //\n        const tfile = await OS.appendPath(configDir, 'theme.json');\n        await OS.writeFile(tfile, JSON.stringify(value));\n\n        //\n        // Set the default state map colors.\n        //\n        localStateMapColors['normal'] = localTheme.normalbackgroundColor;\n        localStateMapColors['insert'] = localTheme.insertbackgroundColor;\n        localStateMapColors['visual'] = localTheme.visualbackgroundColor;\n        $stateMapColors = localStateMapColors;\n      }\n    });\n    var unsubscriptStateMapColors = stateMapColors.subscribe(value => {\n      localStateMapColors = value;\n    });\n    var unsubscribeInputState = inputState.subscribe(value => {\n      localState = value;\n    });\n    $inputState = localState;\n\n    //\n    // Setup the user editor data file.\n    //\n    const hdir = await OS.getHomeDir();\n    userEditor = await OS.appendPath(hdir, '.myeditorchoice');\n    if(! await OS.fileExists(userEditor)) {\n      const edFile = await OS.appendPath(configDir, '.myeditorchoice');\n      if(! await OS.fileExists(edFile)) {\n        //\n        // They don't have this file setup. TODO: Set it up or not?\n        //\n      }\n    }\n\n    //\n    // Load the extensions, keyboard, and theme.\n    //\n    loadExtensionsKeyboard();\n    \n    // \n    // Set the configuration store.\n    //\n    $config = {\n      configDir: configDir,\n      OS: OS,\n      configuration: localConfig,\n      commands: commands,\n      extensions: extensions,\n      userEditor: userEditor\n    };\n    OS.setConfig(localConfig);\n    extensions.setConfig(localConfig);\n\n    // \n    // Setup the directory history.\n    //\n    var dhist = get(dirHistory);\n    dhist.loadHistory();\n    $dirHistory = dhist;\n\n    //\n    // return a command to unsubscribe from everything.\n    //\n    return(() => {\n      unsubscribeKeyProcess();\n      unsubscribeInputState();\n      unsubscribeTheme();\n      unsubscribeCurrentRightFile();\n      unsubscribeCurrentLeftFile();\n      unsubscribeCurrentCursor();\n      unsubscribeRightDir();\n      unsubscribeLeftDir();\n      unsubscriptStateMapColors();\n    })\n  });\n\n async function loadExtensionsKeyboard() {\n    //\n    // Setup the default commands.\n    //\n    installDefaultCommands();\n\n    //\n    // load the theme.\n    //\n    const thFile = await OS.appendPath(configDir, 'theme.json');\n    if(! await OS.fileExists(thFile)) {\n      //\n      // Setup the Dracula Pro as default theme colors:\n      //\n      localTheme = {\n        font: \"Fira Code, Menlo\",\n        fontSize: \"12pt\",\n        cursorColor: '#363443',\n        selectedColor: '#454158',\n        backgroundColor: '#22212C',\n        textColor: '#F8F8F2',\n        borderColor: '#1B1A23',\n        normalbackgroundColor: \"#80FFEA\",\n        insertbackgroundColor: \"#8AFF80\",\n        visualbackgroundColor: \"#FF80BF\",\n        commentColor: \"#7970A9\",\n        Cyan: \"#80FFEA\",\n        Green: \"#8AFF80\",\n        Orange: \"#FFCA80\",\n        Pink: \"#FF80BF\",\n        Purple: \"#9580FF\",\n        Red: \"#FF9580\",\n        Yellow: \"#FFFF80\"\n      };\n\n      //\n      // Save the default theme.\n      //\n      await OS.writeFile(thFile, JSON.stringify(localTheme));\n    } else {\n      //\n      // Load the theme saved.\n      //\n      const rawThFile = await OS.readFile(thFile);\n      localTheme = JSON.parse(rawThFile);\n    }\n\n    //\n    // Get the stateMapColors setup.\n    //\n    localStateMapColors['normal'] = localTheme.normalbackgroundColor;\n    localStateMapColors['insert'] = localTheme.insertbackgroundColor;\n    localStateMapColors['visual'] = localTheme.visualbackgroundColor;\n    stateMapColors.set(localStateMapColors);\n\n    //\n    // Set the theme.\n    //\n    theme.set(localTheme);\n\n\n    //\n    // Setup Extensions.\n    //\n    setUpExt();\n\n    //\n    // Setup State Maps. This has to be after setting up extensions in case\n    // an extension command is being used.\n    //\n    loadKeyMaps();\n    extensions.installKeyMaps();\n  }\n\n  async function setUpExt() {\n    const extDir = await OS.appendPath(configDir, 'extensions');\n    extensions.setExtensionDir(extDir);\n    extensions.setCommands(commands);\n    extensions.setFileSystems(filesystems);\n    await extensions.load(localConfig, OS);\n    installDefaultExtCommands();\n    extensions.init();\n  }\n\n  function clearKeyboard() {\n    stateMaps = [];\n  }\n\n  function clearExtensions() {\n    extensions.unloadExtensions();\n  }\n\n  function clearCommands() {\n    commands.commandList = [];\n    commands.lastError = '';\n  }\n\n  function reloadExtensions() {\n    clearKeyboard();\n    clearExtensions();\n    clearCommands();\n    loadExtensionsKeyboard();\n  }\n\n function switchView(view) {\n    dispatch('switchView', {\n      view: view\n    });\n  }\n\n  function showPreferences() {\n    switchView('preferences');\n  }\n\n  function getOS() {\n    return 'macOS';\n  }\n\n  function installDefaultExtCommands() {\n    extensions.addExtCommand('setCursor','Set the cursor to the file name given in the current panel.', setCursor);\n    extensions.addExtCommand('cursorToPane', 'Set the cursor to the pane given. Either \"left\" or \"right\", cursorToPane');\n    extensions.addExtCommand('changeDir', 'Change the directory of a pane and make it the current.', changeDir);\n    extensions.addExtCommand('getLeftFile', 'Get the current left file information.', getLeftFile);\n    extensions.addExtCommand('getRightFile', 'Get the current right file information.', getRightFile);\n    extensions.addExtCommand('getCursor', 'Get the current cursor.', getCursor);\n    extensions.addExtCommand('addKeyboardShort', 'Add a keyboard shortcut.', addKeyboardShort);\n    extensions.addExtCommand('setTheme', 'Set the theme to the values given.', setTheme);\n    extensions.addExtCommand('getTheme', 'Get the current theme values.', getTheme);\n    extensions.addExtCommand('getOS', 'Get the local OS name.', getOS);\n    extensions.addExtCommand('addDirectoryListener', 'Register a function that will be called with each change in directory.', addDirectoryListener);\n    extensions.addExtCommand('getLastError', 'returns the last error.', getLastError);\n    extensions.addExtCommand('getSelectedFiles', 'Returns a list of Entries that have been selected', getSelectedFiles);\n    extensions.addExtCommand('getCurrentFile', 'Get the current file.', getCurrentFile);\n    extensions.addExtCommand('getCurrentPane', 'Get the pane that is currently active.', getCurrentPane);\n    extensions.addExtCommand('changeDir', 'Change the current directory for a pane.', changeDir);\n    extensions.addExtCommand('addSpinner', 'Add a message box spinner value.', addSpinner);\n    extensions.addExtCommand('updateSpinner', 'Update a message box spinner value.', updateSpinner);\n    extensions.addExtCommand('removeSpinner', 'Remove a message box spinner value.', removeSpinner);\n    extensions.addExtCommand('keyProcessor', 'Send a keystroke to be processed.', keyProcessor);\n    extensions.addExtCommand('stringKeyProcessor', 'Send a string of keystrokes to be processed.', stringKeyProcessor);\n    extensions.addExtCommand('askQuestion', 'Ask a question and get the response.', askQuestion);\n    extensions.addExtCommand('pickItem', 'Choose from a list of items.', pickItem);\n    extensions.addExtCommand('showMessage', 'Show a message to the user.', showMessage);\n    extensions.addExtCommand('createNewMode', 'Allows the creation of a new mode for keyboard commands.', createNewMode);\n    extensions.addExtCommand('changeMode', 'Change to mode given.', changeMode);\n    extensions.addExtCommand('switchView', 'Switch the active program view.', switchView);\n    extensions.addExtCommand('copyEntriesCommand', 'Copy the list of entries to new location.', copyEntriesCommand);\n    extensions.addExtCommand('moveEntriesCommand', 'Move the list of entries to the new location.', moveEntriesCommand);\n    extensions.addExtCommand('deleteEntriesCommand', 'Delete the list of entries.', deleteEntriesCommand);\n    extensions.addExtCommand('editEntryCommand', 'Edit the given entry.', editEntryCommand);\n    extensions.addExtCommand('getRightDir', 'Get the path for the right pane.', getRightDir);\n    extensions.addExtCommand('getLeftDir', 'Get the path for the left pane.', getLeftDir);\n    extensions.addExtCommand('addExtraPanelProcessor', 'Add a processor for creating extra panel html.', addExtraPanelProcessor);\n  }\n\n  function installDefaultCommands() {\n    //\n    // Add all built in commands to the commands object.\n    //\n    commands.addCommand('Move Cursor Down','moveCursorDown','Move the cursor down one line.',moveCursorDown);\n    commands.addCommand('Move Cursor Down with Selection', 'moveCursorDownWithSelect','This will select the current file and move the cursor down one line.',moveCursorDownWithSelect);\n    commands.addCommand('Move Cursor Up','moveCursorUp','This will move the cursor up one line',moveCursorUp);\n    commands.addCommand('Move Cursor Up with Selection','moveCursorUpWithSelect','This will move select the current entry and move the cursor up one line.',moveCursorUpWithSelect);\n    commands.addCommand('Change Mode to Normal','changeModeNormal','Set the normal mode.',changeModeNormal);\n    commands.addCommand('Change Mode to Insert','changeModeInsert','Set the insert mode.',changeModeInsert);\n    commands.addCommand('Change Mode to Visual','changeModeVisual','Set the visual mode.',changeModeVisual);\n    commands.addCommand('Cursor to Next Pane','cursorToNextPane','This will move the cursore to the opposite pane.',cursorToNextPane);\n    commands.addCommand('Action Entry','actionEntry','This will open a file or go into a directory.',actionEntry);\n    commands.addCommand('Go Up a Directory','goUpDir','Go to the parent directory.',goUpDir);\n    commands.addCommand('Go Down a Directory','goDownDir','If the current entry is a directory, go to it.',goDownDir);\n    commands.addCommand('Go to Bottom Entry','goBottomFile','Move the cursor to the bottom most file.',goBottomFile);\n    commands.addCommand('Go to Top Entry','goTopFile','Move the cursor to the top most file.',goTopFile);\n    commands.addCommand('Delete Entries', 'deleteEntries', 'Delete all selected entries or the one under the cursor', deleteEntries);\n    commands.addCommand('Copy Entries', 'copyEntries', 'Copy the selected entries or the one under the cursor to the other pane.', copyEntries);\n    commands.addCommand('Move Entries', 'moveEntries', 'Move the selected entries or the one under the cursor to the other pane.', moveEntries);\n    commands.addCommand('Edit Entry', 'editEntry', 'Opens the file under the cursor in the editor specified. This command assumes using a Text/Code editor on the file.', editEntry);\n    commands.addCommand('Duplicate Entry', 'duplicateEntry', 'Make a copy of the current entry with \"_copy\" added to it.', duplicateEntry);\n    commands.addCommand('New File', 'newFile', 'Create a new file in the current pane.', newFile);\n    commands.addCommand('New Directory', 'newDirectory', 'Create a new directory in the current pane.', newDirectory);\n    commands.addCommand('Rename Entry', 'renameEntry', 'Rename the current entry.', renameEntry);\n    commands.addCommand('Swap Panels', 'swapPanels', 'Swap the panel contents.', swapPanels);\n    commands.addCommand('Toggle Quick Search', 'toggleQuickSearch', 'Show/Hide the Quick Search panel.', toggleQuickSearch);\n    commands.addCommand('Reload Pane', 'reloadPane', 'Reload the Current Pane.', reloadPane);\n    commands.addCommand('Edit Directory', 'editDirLoc', 'Edit the current panels directory.', editDirLoc);\n    commands.addCommand('Toggle Extra Panel', 'toggleExtraPanel', 'Toggles the showing of the extra panel.', toggleExtraPanel);\n    commands.addCommand('Toggle Command Prompt', 'toggleCommandPrompt', 'Toggles showing the command prompt.', toggleCommandPrompt);\n    commands.addCommand('Toggle GitHub Importer', 'toggleGitHub', 'Toggles the showing of the GitHub importer.', toggleGitHub);\n    commands.addCommand('Refresh Panes', 'refreshPanes', 'Reloads both panes.', refreshPanes);\n    commands.addCommand('Refresh Right Pane', 'refreshRightPane', 'Refresh the Right Pane', refreshRightPane);\n    commands.addCommand('Refresh Left Pane', 'refreshLeftPane', 'Reloads the Left Pane.', refreshLeftPane);\n    commands.addCommand('Rerun Last Command', 'reRunLastCommand', 'Runs the last command with it\\'s number.', reRunLastCommand);\n    commands.addCommand('Toggle Filter', 'toggleFilter', 'Toggles the show all and default filters.', toggleFilter );\n    commands.addCommand('Show All Filter', 'setShowAllFilter', 'Sets to show all Entries.', setShowAllFilter);\n    commands.addCommand('Show Only Non-System Files/Folders', 'setDefaultFilter', 'Sets the default filter of not showing system files/folders.', setDefaultFilter);\n    commands.addCommand('Open in Opposite Panel', 'openOppositePanel', 'Set the opposite panel to the directory under the current cursor or the directory of the current cursor.', openOppositePanel);\n    commands.addCommand('Show Preferences', 'showPreferences', 'Show the preferences.', showPreferences);\n    commands.addCommand('Reload Extensions', 'reloadExtensions', 'Reload the extensions, keyboard maps, and theme.', reloadExtensions);\n  }\n  \n  function processKeyFunction(e) {\n    //\n    // Stop the system for propgating the keystroke.\n    //\n    e.preventDefault();\n\n    // \n    // Send to the processor.\n    //\n    keyProcessor(e.key, $ctrlKey, $shiftKey, $metaKey);\n  }\n\n  function stringKeyProcessor(str) {\n    for(var i=0; i < str.length; i++) {\n      if((str[i] >= 'A')&&(str[i] <= 'Z')) {\n        keyProcessor(str[i], false, true, false);\n      } else {\n        keyProcessor(str[i], false, false, false);\n      }\n    }\n  }\n\n  function reRunLastCommand() {\n    stringKeyProcessor(lastCommand);\n  }\n\n  function keyProcessor(key, cKey, sKey, mKey) {\n\n    if((key >= 0)&&(key <=9)) {\n      // \n      // It is a number prefixing a command. Get the digits for using in the command.\n      // \n      numberAcc += key;\n    } else {\n      //\n      // Get the command for the current state in the stateMaps.\n      //\n      \n      const command = getCommand(stateMaps[localState], key, cKey, sKey, mKey);\n      \n      // \n      // Figure the number of times to run the command.\n      // \n      var num = parseInt(numberAcc,10);\n      if((num === 0)||(isNaN(num))) num = 1;\n      if(command.name !== 'reRunLastCommand') lastCommand = numberAcc + key;\n\n      //\n      // Run the command.\n      //\n      try {\n        do {\n          command.command();\n        } while((num--) > 1);\n      } catch(e) {\n        //\n        // Something happened in the command. Tell about it.\n        //\n        lastError = e;\n        console.log(e);\n      }\n      numberAcc = '';\n    }\n  }\n\n function createNewMode(name, color) {\n    stateMaps[name] = [];\n    localStateMapColors[name] = color;\n    stateMapColors.set(localStateMapColors);\n }\n\n function getCommand(map, key, cKey, sKey, mKey) {\n     var result = {\n      command: () => {},\n      name: 'empty'\n    };\n    var rmap = map.find(item => ((item.key == key) && (item.meta == mKey) && (item.ctrl == cKey) && (item.shift == sKey)));\n    if(typeof rmap !== 'undefined') {\n      result = rmap;\n    }\n    return result;\n  }\n\n  function setCursor(fname){\n    var index = 0;\n    if(localCurrentCursor.pane == 'left') {\n      index = leftEntries.findIndex(item => item.name == fname);\n      if(index === -1) index = 0;\n      currentCursor.set({\n        pane: 'left',\n        entry: leftEntries[index]\n      });\n      currentLeftFile.set({\n        entry: leftEntries[index]\n      });\n    } else {\n      index = rightEntries.findIndex(item => item.name == fname);\n      if(index === -1) index = 0;\n      currentCursor.set({\n        pane: 'right',\n        entry: rightEntries[index]\n      });\n      currentRightFile.set({\n        entry: rightEntries[index]\n      });\n    }\n  }\n\n  function moveCursorDown() {\n    var index = 0;\n    if(localCurrentCursor.pane.includes('left')) {\n      if(leftEntries.length !== 0) {\n        index = leftEntries.findIndex(item => item.name == localCurrentCursor.entry.name);\n        if(index < (leftEntries.length-1)) {\n          index += 1;\n        }\n        currentCursor.set({\n          pane: 'left',\n          entry: leftEntries[index]\n        });\n        currentLeftFile.set({\n          entry: leftEntries[index]\n        });\n      }\n    } else {\n      if(rightEntries.length !== 0) {\n        index = rightEntries.findIndex(item => item.name == localCurrentCursor.entry.name);\n        if(index < (rightEntries.length-1)) {\n          index += 1;\n        }\n        currentCursor.set({\n          pane: 'right',\n          entry: rightEntries[index]\n        });\n        currentRightFile.set({\n          entry: rightEntries[index]\n        });\n      }\n    }\n  }\n\n  function moveCursorDownWithSelect() {\n    var index = 0;\n    if(localCurrentCursor.pane.includes('left')) {\n      if(leftEntries.length !== 0 ) {\n        index = leftEntries.findIndex(item => item.name == localCurrentCursor.entry.name);\n        if(index === -1) index = 0;\n        var entry = leftEntries[index];\n        entry.selected = !entry.selected;\n        leftEntries[index] = entry;\n        if(index < (leftEntries.length-1)) {\n          index += 1;\n        }\n        entry = leftEntries[index];\n        currentCursor.set({\n          pane: 'left',\n          entry: entry\n        });\n        currentLeftFile.set({\n          entry: entry\n        });\n      }\n    } else {\n      if(rightEntries.length !== 0) {\n        index = rightEntries.findIndex(item => item.name == localCurrentCursor.entry.name);\n        if(index === -1) index = 0;\n        var entry = rightEntries[index];\n        entry.selected = !entry.selected;\n        rightEntries[index] = entry;\n        if(index < (rightEntries.length-1)) {\n          index += 1;\n        }\n        entry = rightEntries[index];\n        currentCursor.set({\n          pane: 'right',\n          entry: entry\n        });\n        currentRightFile.set({\n          entry: entry\n        });\n      }\n    }\n  }\n\n  function moveCursorUp() {\n    var index = 0;\n    if(localCurrentCursor.pane.includes('left')) {\n      if(leftEntries.length !== 0) {\n        index = leftEntries.findIndex(item => item.name == localCurrentCursor.entry.name);\n        if(index > 0) {\n          index -= 1;\n        }\n        if(index === -1) index = 0;\n        currentCursor.set({\n          pane: 'left',\n          entry: leftEntries[index]\n        });\n        currentLeftFile.set({\n          entry: leftEntries[index]\n        });\n      }\n    } else {\n      if(rightEntries.length !== 0) {\n        index = rightEntries.findIndex(item => item.name == localCurrentCursor.entry.name);\n        if(index > 0) {\n          index -= 1;\n        }\n        if(index === -1) index = 0;\n        currentCursor.set({\n          pane: 'right',\n          entry: rightEntries[index]\n        });\n        currentRightFile.set({\n          entry: rightEntries[index]\n        });\n      }\n    }\n  }\n\n  function moveCursorUpWithSelect() {\n    var index = 0;\n    if(localCurrentCursor.pane.includes('left')) {\n      if(leftEntries.length !== 0) {\n        index = leftEntries.findIndex(item => item.name == localCurrentCursor.entry.name);\n        if(index === -1) index = 0;\n        var entry = leftEntries[index];\n        entry.selected = !entry.selected;\n        leftEntries[index] = entry;\n        if(index > 0) {\n          index -= 1;\n        }\n        entry = leftEntries[index];\n        currentCursor.set({\n          pane: 'left',\n          entry: entry\n        });\n        currentLeftFile.set({\n          entry: entry\n        });\n      }\n    } else {\n      if(rightEntries.length !== 0) {\n        index = rightEntries.findIndex(item => item.name == localCurrentCursor.entry.name);\n        if(index === -1) index = 0;\n        var entry = rightEntries[index];\n        entry.selected = !entry.selected;\n        rightEntries[index] = entry;\n        if(index > 0) {\n          index -= 1;\n        }\n        entry = rightEntries[index];\n        currentCursor.set({\n          pane: 'right',\n          entry: entry\n        });\n        currentRightFile.set({\n          entry: entry\n        });\n      }\n    }\n  }\n\n  function changeMode(newMode) {\n    inputState.set(newMode);\n    localState = newMode;\n  }\n\n  function changeModeNormal() {\n    changeMode('normal');\n  }\n  \n  function changeModeInsert() {\n    changeMode('insert');\n  }\n  \n  function changeModeVisual() {\n    changeMode('visual');\n  }\n\n  async function openOppositePanel() {\n    var nEntry = localCurrentCursor.entry.dir;\n    if(localCurrentCursor.entry.type === 1) {\n      nEntry = await localCurrentCursor.entry.fileSystem.appendPath(localCurrentCursor.entry.dir, localCurrentCursor.entry.name);\n    }\n    if(localCurrentCursor.pane === 'right') {\n      changeDir({\n        path: nEntry,\n        cursor: true\n      },'left','');\n    } else {\n      changeDir({\n        path: nEntry,\n        cursor: true\n      },'right', '');\n    }\n  }\n\n  function cursorToPane(npane) {\n    if(npane == 'right') {\n      currentCursor.set({\n        pane: 'right',\n        entry: localCurrentRightFile.entry\n      })\n    } else {\n      currentCursor.set({\n        pane: 'left',\n        entry: localCurrentLeftFile.entry\n      })\n    }\n  }\n\n  function cursorToNextPane() {\n    if(localCurrentCursor.pane == 'left') {\n      currentCursor.set({\n        pane: 'right',\n        entry: localCurrentRightFile.entry\n      })\n    } else {\n      currentCursor.set({\n        pane: 'left',\n        entry: localCurrentLeftFile.entry\n      })\n    }\n  }\n\n  function mouseMove(e) {\n    if(mdown) {\n      leftDOM.style.width = e.clientX + 'px';\n      rightDOM.style.width = (containerDOM.clientWidth - (e.clientX+10)) + 'px';\n    }\n  }\n\n  function reloadPane() {\n    changeDir({\n      path: localCurrentCursor.entry.dir,\n      cursor: true,\n    }, \n    localCurrentCursor.pane,\n    localCurrentCursor.entry.name\n    );\n  }\n\n  async function changeDir(dirOb, npane, name) {\n    var ndir = dirOb.path;\n    if(typeof npane === 'undefined') npane = localCurrentCursor.pane;\n    if(typeof dirOb.cursor === 'undefined') dirOb.cursor = true;\n    if(typeof name === 'undefined') name = '';\n    if(npane == 'left') {\n      leftDir.set({path: ndir, fileSystemType: localLeftDir.fileSystemType, fileSystem: localLeftDir.fileSystem});\n      leftEntries = await localLeftDir.fileSystem.getDirList(ndir);\n      if(leftEntries.length !== 0) {\n        var entry = leftEntries.filter(item => item.name === name);\n        if(entry.length !== 0) {\n          currentLeftFile.set({\n            entry: entry[0],\n            pane: npane\n          });\n          currentCursor.set({\n            entry: entry[0],\n            pane: npane\n          });\n        } else {\n          currentLeftFile.set({ entry: leftEntries[0], pane: npane});\n          currentCursor.set({ entry: leftEntries[0], pane: npane});\n        }\n      } else {\n        currentLeftFile.set({ entry: {\n          name: '',\n          size: '',\n          type: localLeftDir.fileSystemType,\n          fileSystem: localLeftDir.fileSystem,\n          dir: ndir,\n          datetime: '',\n          selected: false\n        }});\n        if(dirOb.cursor) {\n          currentCursor.set({ entry: {\n            name: '',\n            size: '',\n            type: localLeftDir.fileSystemType,\n            fileSystem: localLeftDir.fileSystem,\n            dir: ndir,\n            datetime: '',\n            selected: false\n          }, pane: npane});\n        }\n      }\n    } else {\n      rightDir.set({path: ndir, fileSystemType: localRightDir.fileSystemType, fileSystem: localRightDir.fileSystem});\n      rightEntries = await localRightDir.fileSystem.getDirList(ndir);\n      if(rightEntries.length !== 0) {\n        var entry = rightEntries.filter(item => item.name === name);\n        if(entry.length !== 0) {\n          currentRightFile.set({\n            entry: entry[0],\n            pane: npane\n          });\n          currentCursor.set({\n            entry: entry[0],\n            pane: npane\n          });\n        } else {\n          currentRightFile.set({ entry: rightEntries[0], pane: npane});\n          currentCursor.set({ entry: rightEntries[0], pane: npane});\n        }\n      } else {\n        currentRightFile.set({ entry: {\n          name: '',\n          size: '',\n          type: localRightDir.fileSystemType,\n          fileSystem: localRightDir.fileSystem,\n          dir: ndir,\n          datetime: '',\n          selected: false\n        }});\n        if(dirOb.cursor) {\n          currentCursor.set({ entry: {\n            name: '',\n            size: '',\n            type: localRightDir.fileSystemType,\n            fileSystem: localRightDir.fileSystem,\n            dir: ndir,\n            datetime: '',\n            selected: false\n          }, pane: npane});\n        }\n      }\n    }\n  }\n\n  async function openFile(entry) {\n    await entry.fileSystem.openFile(entry.dir, entry.name);\n  }\n\n  async function actionEntry() {\n    if(localCurrentCursor.entry.type === 0) {\n      //\n      // It is a file. Open it.\n      //\n      openFile(localCurrentCursor.entry);\n    } else {\n      //\n      // It is a directory. Go down a level.\n      //\n      var ndir = await localCurrentCursor.entry.fileSystem.appendPath(localCurrentCursor.entry.dir, localCurrentCursor.entry.name);\n      changeDir({\n        path: ndir,\n        cursor: true\n      }, localCurrentCursor.pane, '');\n    }\n  }\n  \n  function goUpDir() {\n    var sep = localCurrentCursor.entry.fileSystem.sep;\n    var parts = localCurrentCursor.entry.dir.split(sep);\n    if(parts.length > 0) {\n      var newDir = parts.slice(0,parts.length-1).join(sep);\n      if(newDir == '') newDir = sep;\n      changeDir({\n        path: newDir,\n        cursor: true\n      }, localCurrentCursor.pane, parts[parts.length-1]);\n      setCursor(parts[parts.length-1]);\n    }\n  }\n\n  async function goDownDir() {\n    if(localCurrentCursor.entry.type === 1) {\n      var newDir = await localCurrentCursor.entry.fileSystem.appendPath(localCurrentCursor.entry.dir, localCurrentCursor.entry.name);\n      changeDir({\n        path: newDir,\n        cursor: true\n      }, localCurrentCursor.pane, '');\n    }\n  }\n\n  function goBottomFile() {\n    if(localCurrentCursor.pane == 'left') {\n      if(leftEntries.length !== 0) {\n        const last = leftEntries[leftEntries.length - 1];\n        setCursor(last.name);\n      }\n    } else {\n      if(rightEntries.length !== 0) {\n        const last = rightEntries[rightEntries.length - 1];\n        setCursor(last.name);\n      }\n    }\n  }\n\n  function goTopFile() {\n    if(localCurrentCursor.pane == 'left') {\n      if(leftEntries.length !== 0) {\n        var top = leftEntries[0];\n        setCursor(top.name);\n      }\n    } else {\n      if(rightEntries.length !== 0) {\n        var top = rightEntries[0];\n        setCursor(top.name);\n      }\n    }\n  }\n\n  function getCurrentFile() {\n    return(localCurrentCursor.entry);\n  }\n\n  function getCurrentPane() {\n    return(localCurrentCursor.pane);\n  }\n\n  function getLastError() {\n    return(lastError);\n  }\n\n  function deleteEntries() {\n    var entries = getSelectedFiles();\n    if(entries.length === 0) {\n      //\n      // Get the entry at the current cursor\n      //\n      entries.push(localCurrentCursor.entry);\n      localCurrentCursor.entry = null;\n    }\n    deleteEntriesCommand(entries);\n  }\n\n  async function deleteEntriesCommand(entries) {\n    msgBoxConfig = {\n      title: \"Deleting Entries\",\n      noShowButton: true\n    };\n    msgBoxItems = [];\n    msgBoxItems.push({\n        type: 'label',\n        name: 'msgboxMain',\n        for: 'progress1',\n        text: 'Deleting ' + entries.length + ' Entries...'\n      });\n    msgBoxItems.push({\n        type: 'spinner',\n        name: 'progress1',\n        value: 1\n      });\n    msgBoxItems = msgBoxItems;\n    msgCallBack = (e) => { showMessageBox = false; };\n    addSpinner('progress1', 1);\n \n    entries.forEach(async (item, key, arr) => {\n      await item.fileSystem.deleteEntries(item, (err, stdout)=>{\n        if(err) {\n          //\n          // There was an error in deleting.\n          //\n          console.log(err);\n        } \n        if(key >= (arr.length-1)) {\n          showMessageBox = false;\n          $keyProcess = true;\n\n          //\n          // Refresh the side deleted from.\n          //\n          if(localCurrentCursor.pane === 'left') {\n            refreshLeftPane();\n          } else {\n            refreshRightPane();\n          }\n\n          //\n          // Remove the spinner from being checked.\n          //\n          removeSpinner('progress1');\n        }\n      });\n      updateSpinner('progress1',((key+1)/entries.length)*100);\n    });\n   \n    //\n    // It is all set up. Show the message box.\n    //\n    showMessageBox = true;\n  }\n\n  function copyEntries() {\n    var entries = getSelectedFiles();\n    var sel = true;\n    if(entries.length === 0) {\n      //\n      // Get the entry at the current cursor\n      //\n      entries.push(localCurrentCursor.entry);\n      sel = false;\n    }\n    var otherPane = localCurrentCursor.pane === 'left' ? { ...localCurrentRightFile.entry } : { ...localCurrentLeftFile.entry };\n    copyEntriesCommand(entries, otherPane, sel);\n  }\n\n  async function copyEntriesCommand(entries, otherPane, sel) {\n    msgBoxConfig = {\n      title: \"Copying Entries\",\n      noShowButton: true\n    };\n    msgBoxItems = [];\n    msgBoxItems.push({\n        type: 'label',\n        name: 'msgboxMain',\n        for: 'progress1',\n        text: 'Copying ' + entries.length + ' Entries...'\n      });\n    msgBoxItems.push({\n        type: 'spinner',\n        name: 'progress1',\n        value: 1\n      });\n    msgBoxItems = msgBoxItems;\n    msgCallBack = (e) => { showMessageBox = false; };\n    addSpinner('progress1', 1);\n \n    entries.forEach(async (item, key, arr) => {\n      await item.fileSystem.copyEntries(item, otherPane, (err, stdout)=>{\n        if(key >= (arr.length-1)) {\n          showMessageBox = false;\n          $keyProcess = true;\n\n          //\n          // Refresh the side copied to.\n          //\n          if(localCurrentCursor.pane === 'left') {\n            refreshRightPane();\n          } else {\n            refreshLeftPane();\n          }\n\n          //\n          // clear out the selections.\n          //\n          if(sel) clearSelectedFiles();\n\n          //\n          // Remove the spinner from being checked.\n          //\n          removeSpinner('progress1');\n        }\n      });\n      updateSpinner('progress1',((key+1)/entries.length)*100);\n    });\n   \n    //\n    // It is all set up. Show the message box.\n    //\n    showMessageBox = true;\n  }\n\n  function swapPanels() {\n    var npane = localCurrentCursor.pane === 'left' ? 'right' : 'left';\n    tmp = localCurrentLeftFile;\n    currentLeftFile.set(localCurrentRightFile);\n    currentRightFile.set(tmp);\n    tmp = localLeftDir;\n    leftDir.set(localRightDir);\n    rightDir.set(tmp);\n    var tmp = rightEntries;\n    rightEntries = leftEntries;\n    leftEntries = tmp;\n    tick();\n    cursorToPane(npane);\n  }\n\n  function editEntry() {\n    editEntryCommand(localCurrentCursor.entry);\n  }\n\n  async function editEntryCommand(entry) {\n    if(await OS.fileExists(userEditor)) {\n      //\n      // There is an editor defined by the user. Use it.\n      //\n      var file = entry;\n      if(typeof entry.dir !== 'undefined'){\n        file = await OS.appendPath(entry.dir, entry.name);\n      }\n      var editor = await OS.readFile(userEditor).toString().trim();\n      if(editor.endsWith('.app')) {\n        await OS.openFileWithProgram(editor, file);\n      } else {\n        //\n        // It is a command line editor. Open specially.\n        //\n        if(editor === 'emacs') {\n          //\n          // Open emacs.\n          //\n          await OS.runCommandLine('emacsclient -n -q \"' + file + '\"');\n        } else {\n          //\n          // Open in a terminal program.\n          //\n          await OS.openInTerminal(editor, file);\n        }\n      }\n    } else {\n      //\n      // Open with the system default editor.\n      //\n      openFile(entry);\n    }\n  }\n\n  async function duplicateEntry() {\n    var newName = '';\n    if(localCurrentCursor.entry.name[0] === '.') {\n      newName = localCurrentCursor.entry.name + '-copy';\n    } else {\n      newName = localCurrentCursor.entry.name.split('.');\n      if(newName.length >= 2) {\n        newName[newName.length - 2] = newName[newName.length - 2] + '-copy';\n        newName = newName.join('.');\n      } else {\n        newName = localCurrentCursor.entry.name + \"-copy\";\n      }\n    }\n    var nEntry = { ...localCurrentCursor.entry };\n    nEntry.name = newName;\n    await localCurrentCursor.entry.fileSystem.copyEntries(localCurrentCursor.entry, nEntry);\n    //\n    // Refresh the file list.\n    //\n    if(localCurrentCursor.pane === 'left') {\n      refreshLeftPane();\n    } else {\n      refreshRightPane();\n    }\n  }\n\n  function moveEntries() {\n    var entries = getSelectedFiles();\n    if(entries.length === 0) {\n      //\n      // Get the entry at the current cursor\n      //\n      entries.push(localCurrentCursor.entry);\n    }\n    var otherPane = localCurrentCursor.pane === 'left' ? localCurrentRightFile.entry : localCurrentLeftFile.entry;\n    moveEntriesCommand(entries, otherPane);\n  }\n\n  async function moveEntriesCommand(entries, otherPane) {\n    msgBoxConfig = {\n      title: \"Moving Entries\",\n      noShowButton: true\n    };\n    msgBoxItems = [];\n    msgBoxItems.push({\n        type: 'label',\n        name: 'msgboxMain',\n        for: 'progress1',\n        text: 'Moving ' + entries.length + ' Entries...'\n      });\n    msgBoxItems.push({\n        type: 'spinner',\n        name: 'progress1',\n        value: 1\n      });\n    msgBoxItems = msgBoxItems;\n    msgCallBack = (e) => { showMessageBox = false; };\n    addSpinner('progress1', 1);\n \n    entries.forEach(async (item, key, arr) => {\n      await item.fileSystem.moveEntries(item, otherPane, (err, stdout)=>{\n        if(key >= (arr.length-1)) {\n          showMessageBox = false;\n          $keyProcess = true;\n\n          //\n          // Refresh both sides.\n          //\n          refreshPanes();\n\n          //\n          // Remove the spinner from being checked.\n          //\n          removeSpinner('progress1');\n        }\n      });\n      updateSpinner('progress1',((key+1)/entries.length)*100);\n    });\n   \n    //\n    // It is all set up. Show the message box.\n    //\n    showMessageBox = true;\n  }\n\n  async function refreshRightPane() {\n    //\n    // Refresh right pane.\n    //\n    rightEntries = await localRightDir.fileSystem.getDirList(localRightDir.path);\n    var current = currentRightFile.entry;\n    if(rightEntries.length == 0) {\n      current = {\n        name: '',\n        dir: localRightDir.path,\n        fileSystemType: localRightDir.fileSystemType,\n        fileSystem: localRightDir.fileSystem,\n        selected: false,\n        datetime: '',\n        type: 0,\n        size: 0,\n        stats: null\n      };\n    } else {\n      if((typeof current === 'undefined')||(current === null)||(rightEntries.filter(item => item.name === current.name).length === 0)) {\n        current = rightEntries[0];\n      }\n    }\n    if(localCurrentCursor.pane == 'right') {\n      currentCursor.set({\n        entry: current,\n        pane: 'right'\n      });\n    }\n    currentRightFile.set({\n      entry: current\n    });\n  }\n\n  async function refreshLeftPane() {\n    //\n    // Refresh left pane.\n    //\n    leftEntries = await localLeftDir.fileSystem.getDirList(localLeftDir.path);\n    var current = currentLeftFile.entry;\n    if(leftEntries.length === 0) {\n      current = {\n        name: '',\n        dir: localLeftDir.path,\n        fileSystemType: localLeftDir.fileSystemType,\n        fileSystem: localLeftDir.fileSystem,\n        selected: false,\n        datetime: '',\n        type: 0,\n        size: 0,\n        stats: null\n      };\n    } else {\n      if((typeof current === 'undefined')||(current === null)||(leftEntries.filter(item => item.name === current.name).length === 0)) {\n        current = leftEntries[0];\n      }\n    }\n\n    if(localCurrentCursor.pane == 'left') {\n      currentCursor.set({\n        entry: current,\n        pane: 'left'\n      });\n    }\n    currentLeftFile.set({\n      entry: current\n    });\n  }\n\n  function refreshPanes() {\n    refreshLeftPane();\n    refreshRightPane();\n  }\n\n  function showMessage(title, msg) {\n    msgBoxConfig = {\n      title: title,\n      noShowButton: false\n    };\n\n    // \n    // If the msg starts with a tag open, then assume it is \n    // a block of html and use that for displaying. Otherwise, \n    // use a label.\n    //\n    if(msg[0] === '<') {\n      msgBoxItems = [{\n        type: 'html',\n        text: msg,\n        id: 'msgboxMain'\n      }];\n    } else {\n      msgBoxItems = [{\n        type: 'label',\n        for: 'msgboxMain',\n        text: msg,\n        id: 'msgboxMain'\n      }];\n    }\n    msgCallBack = (e) => {};\n    showMessageBox = true;\n  }\n\n  function pickItem(title, items, returnValue, extra) {\n    if(typeof extra === 'undefined') extra = false;\n    msgBoxConfig = {\n      title: title,\n      noShowButton: false\n    };\n    msgBoxItems = [{\n      type: 'picker',\n      selections: items,\n      value: items[0].value,\n      id: 'msgboxMain',\n      extra: extra\n    }];\n    msgCallBack = (e) => {\n      returnValue(e[0].value);\n      msgCallBack = (e) => {};\n    };\n    showMessageBox = true;\n  }\n\n  function askQuestion(title, question, returnValue) {\n    msgBoxConfig = {\n      title: title,\n      noShowButton: false\n    };\n    msgBoxItems = [{\n      type: 'input',\n      msg: question,\n      value: '',\n      id: 'msgboxMain'\n    }];\n    showMessageBox = true;\n    msgCallBack = (e) => {\n      returnValue(e[0].value);\n      msgCallBack = (e) => {};\n    }\n  }\n\n  function newFile() {\n    msgBoxConfig = {\n      title: \"New File Name\",\n      noShowButton: false\n    };\n    msgBoxItems = [{\n      type: 'input',\n      msg: 'What name do you want to give the new file?',\n      value: '',\n      id: 'msgboxMain'\n    }];\n    showMessageBox = true;\n    msgCallBack = newFileReturn;\n  }\n\n  async function newFileReturn(data) {\n    //\n    // Setup a null callback.\n    //\n    msgCallBack = (e) => {};\n    var nfname = data[0].value;\n\n    //\n    // Create the new file.\n    //\n    var nfile = { ...localCurrentCursor.entry };\n    nfile.name = nfname;\n    await localCurrentCursor.entry.fileSystem.createFile(nfile);\n\n    //\n    // Refresh the file list.\n    //\n    if(localCurrentCursor.pane === 'left') {\n      refreshLeftPane();\n    } else {\n      refreshRightPane();\n    }\n    \n    //\n    // Set the new file as the cursor point.\n    //\n    setCursor(nfname);\n  }\n\n  function newDirectory() {\n    msgBoxConfig = {\n      title: \"New Directory Name\",\n      noShowButton: false\n    };\n    msgBoxItems = [{\n      type: 'input',\n      msg: 'What name do you want to give the new directory?',\n      value: '',\n      id: 'msgboxMain'\n    }]\n\n    showMessageBox = true;\n    msgCallBack = newDirectoryReturn;\n  }\n\n  async function newDirectoryReturn(data) {\n    //\n    // Setup a null callback.\n    //\n    msgCallBack = (e) => {};\n    var ndname = data[0].value;\n\n    //\n    // Create the new file.\n    //\n    var ndir = { ...localCurrentCursor.entry };\n    ndir.name = ndname;\n    await localCurrentCursor.entry.fileSystem.createDir(ndir);\n\n    //\n    // Refresh the file list.\n    //\n    if(localCurrentCursor.pane === 'left') {\n      refreshLeftPane();\n    } else {\n      refreshRightPane();\n    }\n    \n    //\n    // Set the new file as the cursor point.\n    //\n    setCursor(ndname);\n  }\n\n  function renameEntry() {\n    msgBoxConfig = {\n      title: \"Rename File or Directory\",\n      noShowButton: false\n    };\n    msgBoxItems = [{\n      type: 'input',\n      msg: 'What name do you want to change to?',\n      value: localCurrentCursor.entry.name,\n      id: 'msgboxMain'\n    }];\n    showMessageBox = true;\n    msgCallBack = renameReturn;\n  }\n\n  async function renameReturn(data) {\n    //\n    // Setup a null callback.\n    //\n    msgCallBack = (e) => {};\n    var nname = data[0].value;\n\n    //\n    // Create the new file.\n    //\n    var nentry = { ...localCurrentCursor.entry };\n    nentry.name = nname;\n    await localCurrentCursor.entry.fileSystem.renameEntry(localCurrentCursor.entry, nentry);\n\n    //\n    // Refresh the file list.\n    //\n    if(localCurrentCursor.pane === 'left') {\n      refreshLeftPane();\n    } else {\n      refreshRightPane();\n    }\n    \n    //\n    // Set the new file as the cursor point.\n    //\n    setCursor(nname);\n  }\n\n  function clearSelectedFiles() {\n    if(localCurrentCursor.pane == 'left') {\n      //\n      // Clear the left pane's selected files\n      //\n      leftEntries = leftEntries.map(item => {\n        item.selected = false;\n        return item;\n      });\n    } else {\n      //\n      // Clear the right panes selected files\n      //\n      rightEntries = rightEntries.map(item => {\n        item.selected = false;\n        return item;\n      });\n    }\n  }\n\n  function getSelectedFiles() {\n    var selected = [];\n    if(localCurrentCursor.pane == 'left') {\n      //\n      // Get the left pane's selected files\n      //\n      selected = leftEntries.filter(item => item.selected === true);\n    } else {\n      //\n      // Get the right panes selected files\n      //\n      selected = rightEntries.filter(item => item.selected === true);\n    }\n    return(selected);\n  }\n\n  function msgReturn(e) {\n    showMessageBox = false;\n    msgCallBack(e.detail.ans);\n  }\n\n  function toggleQuickSearch() {\n    showQuickSearch = !showQuickSearch;\n  }\n\n  function qsChangeEntries(e) {\n    if(e.detail.pane === 'left') {\n      leftEntries = e.detail.entries;\n    } else {\n      rightEntries = e.detail.entries;\n    }\n    if(localCurrentCursor.pane == 'left') {\n      currentCursor.set({\n        entry: leftEntries[0],\n        pane: 'left'\n      });\n      currentLeftFile.set({\n        entry: leftEntries[0]\n      });\n    } else {\n      currentCursor.set({\n        entry: rightEntries[0],\n        pane: 'right'\n      });\n      currentRightFile.set({\n        entry: rightEntries[0]\n      });\n    }\n  }\n\n  function getCursor() {\n    return(localCurrentCursor);\n  }\n\n  function getLeftFile() {\n    return(localCurrentLeftFile);\n  }\n\n  function getRightFile() {\n    return(localCurrentRightFile);\n  }\n\n  function editDirLoc() {\n    if(localCurrentCursor.pane === 'left') {\n      setEditDirFlagLeft = true;\n    } else {\n      setEditDirFlagRight = true;\n    }\n  }\n\n  function toggleExtraPanel() {\n    showExtra = !showExtra;\n  }\n\n  function addKeyboardShort(keyboard, ctrl, shift, meta, key, cmd) {\n    stateMaps[keyboard].push({\n      ctrl: ctrl,\n      shift: shift,\n      meta: meta,\n      key: key,\n      command: cmd\n    });\n  }\n\n  function setTheme(thm) {\n    theme.set(thm);\n  }\n\n  function getTheme() {\n    return(localTheme);\n  }\n\n  function addDirectoryListener(listener) {\n    var dl = get(directoryListeners);\n    dl.push(listener);\n    directoryListeners.set(dl);\n  }\n\n  function toggleCommandPrompt() {\n    showCommandPrompt = !showCommandPrompt;\n  }\n\n  function addSpinner(name, value) {\n    msgBoxSpinners.push({\n      name: name,\n      value: value\n    });\n    msgBoxSpinners = msgBoxSpinners;\n  }\n\n  function updateSpinner(name, value) {\n    msgBoxSpinners = msgBoxSpinners.map(spinner => {\n      if(spinner.name === name) {\n        spinner.value = value;\n      }\n      return(spinner);\n    });\n  }\n\n  function removeSpinner(name) {\n    msgBoxSpinners = msgBoxSpinners.filter(spinner => spinner.name !== name);\n  }\n\n  function toggleGitHub() {\n    showGitHub = !showGitHub;\n    if(showGitHub) {\n      $keyProcess = false;\n    } else {\n      $keyProcess = true;\n    }\n  }\n\n  function setShowAllFilter() {\n    flagFilter = 0;\n    OS.setFilter(OS.allFilter);\n    refreshPanes();\n  }\n\n  function setDefaultFilter() {\n    flagFilter = 1;\n    OS.setFilter(OS.defaultFilter);\n    refreshPanes();\n  }\n\n  function toggleFilter() {\n    switch(flagFilter) {\n      case 0:\n        setDefaultFilter();\n        break;\n      case 1:\n        setShowAllFilter();\n        break;\n      default:\n        setDefaultFilter();\n        break;\n    }\n  }\n\n  async function createDefaultNormalMap(keyMapDir) {\n    // \n    // There are no key map files. We need to create them.\n    // \n    let defaultNormalMap = [{\n      ctrl: false,\n      shift: true,\n      meta: false,\n      key: ':',\n      command: \"toggleCommandPrompt\"\n    },{\n      ctrl: true,\n      shift: false,\n      meta: false,\n      key: 'p',\n      command: \"toggleCommandPrompt\"\n    },{\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 's',\n      command: \"toggleExtraPanel\"\n    },{\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'q',\n      command: \"editDirLoc\"\n    },{\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'r',\n      command: \"reloadPane\"\n    },{\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'p',\n      command: \"swapPanels\"\n    },{\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'd',\n      command: \"duplicateEntry\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'e',\n      command: \"editEntry\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'm',\n      command: \"moveEntries\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'c',\n      command: \"copyEntries\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'x',\n      command: \"deleteEntries\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'g',\n      command: \"goTopFile\"\n    }, {\n      ctrl: false,\n      shift: true,\n      meta: false,\n      key: 'G',\n      command: \"goBottomFile\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'ArrowDown',\n      command: \"moveCursorDown\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'ArrowUp',\n      command: \"moveCursorUp\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'l',\n      command: \"goDownDir\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'h',\n      command: \"goUpDir\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'Enter',\n      command: \"actionEntry\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'Tab',\n      command: \"cursorToNextPane\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'k',\n      command: \"moveCursorUp\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'j',\n      command: \"moveCursorDown\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'i',\n      command: \"changeModeInsert\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'v',\n      command: \"changeModeVisual\"\n    }, {    \n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: '/',\n      command: \"toggleQuickSearch\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: '.',\n      command: \"reRunLastCommand\"\n    }, {\n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: ',',\n      command: \"toggleFilter\"\n    }, {\n      ctrl: false,\n      shift: true,\n      meta: false,\n      key: 'O',\n      command: \"openOppositePanel\"\n    }];\n    \n    // \n    // Create the directory for the keymaps if it doesn't exist.\n    //\n    if(!await OS.dirExists(keyMapDir)) { \n      await OS.createDir(keyMapDir);\n    }\n\n    //\n    // Create the default files if they don't exist.\n    //\n    const nkmfile = await OS.appendPath(keyMapDir, 'normalKeyMap.json');\n    await OS.writeFile(nkmfile, JSON.stringify(defaultNormalMap));\n    \n    // \n    // Set the proper commands.\n    //\n    stateMaps['normal'] = processKeyMap(defaultNormalMap);\n  }\n\n  async function createDefaultVisualMap(keyMapDir) {\n    let defaultVisualMap = [{\n        ctrl: false,\n      shift: true,\n      meta: false,\n      key: ':',\n      command: \"toggleCommandPrompt\"\n    },{\n        ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'k',\n      command: \"moveCursorUpWithSelect\"\n    }, {\n        ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'j',\n      command: \"moveCursorDownWithSelect\"\n    }, {\n        ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'ArrowDown',\n      command: \"moveCursorDown\"\n    }, {\n        ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'ArrowUp',\n      command: \"moveCursorUp\"\n    }, {    \n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'Escape',\n      command: \"changeModeNormal\"\n    }];\n    \n    // \n    // Create the directory for the keymaps if it doesn't exist.\n    //\n    if(! await OS.dirExists(keyMapDir)) {\n      await OS.createDir(keyMapDir);\n    }\n\n    //\n    // Create the default files if they don't exist.\n    //\n    const nvmFile = await OS.appendPath(keyMapDir, 'visualKeyMap.json');\n    await OS.writeFile(nvmFile, JSON.stringify(defaultVisualMap));\n    \n    // \n    // Set the proper commands.\n    //\n    stateMaps['visual'] = processKeyMap(defaultVisualMap);\n  }\n  \n  async function  createDefaultInsertMap(keyMapDir) {\n    let defaultInsertMap = [{\n        ctrl: false,\n      shift: true,\n      meta: false,\n      key: ':',\n      command: \"toggleCommandPrompt\"\n    },{    \n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'Escape',\n      command: \"changeModeNormal\"\n    }, {    \n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'd',\n      command: \"newDirectory\"\n    }, {    \n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'f',\n      command: \"newFile\"\n    }, {    \n      ctrl: false,\n      shift: false,\n      meta: false,\n      key: 'r',\n      command: \"renameEntry\"\n    }];\n\n    // \n    // Create the directory for the keymaps if it doesn't exist.\n    //\n    if(! await OS.dirExists(keyMapDir)) {\n      await OS.createDir(keyMapDir);\n    }\n\n    //\n    // Create the default files if they don't exist.\n    //\n    const ikmFile = await OS.appendPath(keyMapDir, 'insertKeyMap.json');\n    await OS.writeFile(ikmFile, JSON.stringify(defaultInsertMap));\n    \n    // \n    // Set the proper commands.\n    //\n    stateMaps['insert'] = processKeyMap(defaultInsertMap);\n  }\n\n  async function loadKeyMaps() {\n    //\n    // Load key maps from the config directory.\n    //\n    var keyMapDir = { ...localCurrentCursor.entry };\n    keyMapDir.dir = configDir;\n    keyMapDir.name = 'keyMaps';\n\n    if(! await OS.dirExists(keyMapDir)) {\n      createDefaultNormalMap(keyMapDir);\n      createDefaultVisualMap(keyMapDir);\n      createDefaultInsertMap(keyMapDir);\n    } else {\n      // \n      // The keymap directory is there. let's load the files.\n      // \n      var fileLoc = await OS.appendPath(keyMapDir, 'normalKeyMap.json');\n      if(! await OS.fileExists(fileLoc)) {\n        createDefaultNormalMap(keyMapDir);\n      }\n      const nkmfile = await OS.readFile(fileLoc);\n      stateMaps['normal'] = processKeyMap(JSON.parse(nkmfile));\n\n      fileLoc = await OS.appendPath(keyMapDir, 'visualKeyMap.json')\n      if(! await OS.fileExists(fileLoc)) {\n        createDefaultVisualMap(keyMapDir);\n      }\n      const vmFile = await OS.readFile(fileLoc);\n      stateMaps['visual'] = processKeyMap(JSON.parse(vmFile));\n      \n      fileLoc = await OS.appendPath(keyMapDir, 'insertKeyMap.json');\n      if(! await OS.fileExists(fileLoc)) {\n        createDefaultInsertMap(keyMapDir);\n      }\n      const ikmFile = await OS.readFile(fileLoc);\n      stateMaps['insert'] = processKeyMap(JSON.parse(ikmFile));\n    }\n  }\n\n  function processKeyMap(kmap) {\n    return kmap.map((item, index, arr) => {\n      var cmd = commands.getCommand(item.command);\n      if(typeof cmd === 'undefined') {\n        cmd = commands.getAltCommand(item.command);\n      }\n      if(typeof cmd !== 'undefined') {\n        // \n        // Found the command. Set it up.\n        //\n        item.name = item.command;\n        item.command = cmd.command;\n        return(item);\n      } else {\n        // \n        // If the command can't be found, remove it from the map.\n        //\n        delete arr[index];\n      }\n    });\n  }\n\n  function getRightDir() {\n    return(localRightDir);\n  }\n\n  function getLeftDir() {\n    return(localLeftDir);\n  }\n\n  function addExtraPanelProcessor(panelProc) {\n    var lextraPanel = get(extraPanel);\n    lextraPanel.push(panelProc);\n    extraPanel.set(lextraPanel);\n  }\n</script>\n",
    "<div\n  id='general' \n  bind:this={scrollDOM}\n>\n  {#if localConfig !== null}\n    <h3>Environment for Launching Programs</h3>\n    <Env />\n\n    <h3>Other Configuration Items</h3>\n    <div \n      class='row'\n    >\n      <label\n        for='trashcanans'\n      >\n        Use the Trashcan? \n      </label>\n      {#if localConfig.configuration.useTrash}\n        <input \n          id='trashcanans'\n          type='checkbox'\n          on:change={trashChanged}\n          checked\n        />\n      {:else}\n        <input \n          id='trashcanans'\n          type='checkbox'\n          on:change={trashChanged}\n        />\n      {/if}\n    </div>\n  {/if}\n</div>\n\n<style>\n  #general {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    overflow-y: auto;\n    overflow-x: auto;\n  }\n\n  #trashcanans {\n    margin: auto 0px auto 10px;\n  }\n  \n  h3 {\n    margin-left: 10px;\n  }\n\n  .row {\n    display: flex;\n    flex-direction: row;\n    margin: 10px;\n  }\n</style>\n\n<script>\n  import { onMount, afterUpdate, createEventDispatcher } from 'svelte';\n  import Env from '../components/Env.svelte';\n  import { config } from '../stores/config.js';\n\n  const dispatch = createEventDispatcher();\n\n  let localConfig = null;\n  let scrollDOM = null;\n  let first = true;\n\n  onMount(() => {\n    var unsubscribeConfig = config.subscribe(async (value) => {\n      // \n      // The Config.configuration is what we can change. It contains:\n      // \n      // env          The environment to use when executing command line programs.\n      // useTrash     If true, delete to the trashcan, otherwise delete with 'rm' command.\n      //\n      if(localConfig !== null) {\n        const nfile = await localConfig.localFS.appendPath(localConfig.configDir,'config.json');\n        await localConfig.localFS.writeFile(nfile, JSON.stringify(value.configuration));\n        localConfig.localFS.setConfig(value.configuration);\n      }\n      localConfig = value;\n    });\n\n    return(() => {\n      unsubscribeConfig();\n    });\n  });\n\n  afterUpdate(() => {\n    if((scrollDOM !== null)&&(first)) {\n      dispatch('setScrollDOM', {\n        DOM: scrollDOM\n      });\n      first = false;\n    }\n  });\n\n  function trashChanged(e) {\n    localConfig.configuration.useTrash = e.target.checked;\n    config.set(localConfig);\n  }\n</script>\n",
    "<div  id='GitHub'\n      style=\"background-color: {$theme.backgroundColor};\n             border-color: {util.pSBC(.1,$theme.backgroundColor)};\n             max-height: {getHeight()}px;\n             width: {width !== null ? width : 100}px;\n             color: {$theme.textColor};\" \n      on:blur={(e) => { exitGitHub(); }}\n>\n  <div id='GitHubHeader'>\n    <h3>GitHub Themes and Extensions Importer</h3>\n    <span\n      on:click={(e) => {\n        exitGitHub();\n      }}\n      style=\"color: {$theme.Red};\"\n    >\n     X\n    </span>\n    <input\n      id=\"inputHidden\"\n      bind:this={hiddenInput}\n      on:keydown={inputChange}\n    />\n  </div>\n  <div id='GitHubList'\n       bind:this={pickerDOM}\n  >\n    {#await repos}\n      <h3>Loading Extensions Repositories....</h3>\n    {:then value}\n      {#if check(value)}\n        {#each value.data.items as repo}\n          <div class='repoblock'>\n            <div class='reporow'>\n              <p class='reponame'>\n                {repo.name}\n              </p>\n              <p class='repostars'\n                 style=\"color: {$theme.Yellow};\"\n              >\n                {repo.stargazers_count} ‚≠êÔ∏è s\n              </p>\n            </div>\n            <div class='reporow'>\n              <p class='repodisc'>\n                {repo.description}\n              </p>\n            </div>\n            {#if hasMsg(repo)}\n              <div class='reporow'\n                   style=\"color: {$theme.Red};\"\n              >\n                {@html getMsg(repo)}\n              </div>\n            {/if}\n            <div class='repobuttons'>\n              {#if extExists(repo)}\n                <button\n                  on:click={(e) => {\n                    deleteExtension(repo);\n                  }}\n                  style=\"background-color: {$theme.Red};\"\n                >\n                  Delete\n                </button>\n              {:else}\n                <button\n                  on:click={(e) => {\n                    installExtension(repo);\n                  }}\n                  style=\"background-color: {$theme.Green};\"\n                >\n                  Install\n                </button>\n              {/if}\n            </div>\n          </div>\n        {/each}\n      {/if}\n    {:catch error}\n      <h2>There was an error: {error}</h2>\n    {/await}\n    {#await themes}\n      <h3>Loading Theme Repositories....</h3>\n    {:then valueTheme}\n      {#if check(valueTheme)}\n        {#each valueTheme.data.items as thm}\n          <div class=\"repoblock\">\n            <div class='reporow'>\n              <p class='reponame'>\n                {thm.name}\n              </p>\n              <p class='repostars'\n                 style=\"color: {$theme.Yellow};\"\n              >\n                {thm.stargazers_count} ‚≠êÔ∏è s\n              </p>\n            </div>\n            <div class='reporow'>\n              <p class='repodisc'>\n                {thm.description}\n              </p>\n            </div>\n            {#if hasMsg(thm)}\n              <div class='reporow'\n                   style=\"color: {$theme.Red};\"\n              >\n                {@html getMsg(thm)}\n              </div>\n            {/if}\n            <div class=\"repobuttons\">\n              {#if themeExists(thm)}\n                <button\n                  on:click={(e) => {\n                    loadTheme(thm);\n                  }}\n                  style=\"background-color: {$theme.Green};\"\n                >\n                  Load\n                </button>\n                <button\n                  on:click={(e) => {\n                    deleteTheme(thm);\n                  }}\n                  style=\"background-color: {$theme.Red};\"\n                >\n                  Delete\n                </button>\n              {:else}\n                <button\n                  on:click={(e) => {\n                    installTheme(thm);\n                  }}\n                  style=\"background-color: {$theme.Green};\"\n                >\n                  Install\n                </button>\n              {/if}\n            </div>\n          </div>\n        {/each}\n      {/if}\n    {:catch error}\n      <h2>There was an error: {error}</h2>\n    {/await}\n  </div>\n</div>\n\n<style>\n  #GitHub {\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    top: 20px;\n    left: 20px;\n    border: 3px solid;\n    border-radius: 3px;\n    z-index: 100;\n  }\n\n  #GitHubHeader {\n    display: flex;\n    flex-direction: row;\n    margin: 10px;\n  }\n\n  #GitHubHeader h3 {\n    margin: 0px auto 0px 0px;\n  }\n\n  #GitHubHeader span {\n    margin: 0px 0px 0px auto;\n  }\n\n  #GitHubList {\n    margin: 5px 10px;\n    overflow-y: auto;\n    overflow-x: hidden;\n  }\n\n  #inputHidden {\n    width: 0px;\n    height: 0px;\n    margin: 0px;\n    padding: 0px;\n    border: 0px solid transparent;\n  }\n\n  .reporow {\n    display: flex;\n    flex-direction: row;\n    margin: 0px;\n  }\n\n  .reponame {\n    margin: 0px auto 0px 0px;\n  }\n\n  .repostars {\n    margin: 0px 0px 0px auto;\n  }\n\n  .repodisc {\n    margin: 0px 0px 0px 15px;\n  }\n\n  .repoblock {\n    display: flex;\n    flex-direction: column;\n    margin: 5px 0px;\n  }\n\n  .repobuttons {\n    display: flex;\n    flex-direction: row;\n    margin: 5px auto;\n  }\n\n  .repobuttons button {\n    margin: 0px 10px;\n    border-radius: 5px;\n  }\n</style>\n\n<script>\n  import { createEventDispatcher, onMount, afterUpdate } from 'svelte';\n  import { get } from 'svelte/store';\n  import { theme } from '../stores/theme.js';\n  import { config } from '../stores/config.js';\n  import { keyProcess } from '../stores/keyProcess.js';\n  import util from '../modules/util.js';\n  import { Octokit } from \"@octokit/rest\";\n\n  const dispatch = createEventDispatcher();\n\n  let octok;\n  let repos;\n  let themes;\n  let width = null;\n  let msgs = [];\n  let pickerDOM;\n  let hiddenInput;\n  let once = true;\n  let timeOut;\n\n  onMount(() => {\n    keyProcess.set(false);\n    width = window.innerWidth - 30;\n    octok = new Octokit();\n    loadRepoInfo();\n    timeOut = setTimeout(focusInput, 1000);\n    (() => {\n      clearTimeout(timeOut);\n    })\n  });\n\n  afterUpdate(() => {\n    if(typeof hiddenInput !== 'undefined') hiddenInput.focus();\n  });\n\n  function focusInput() {\n    if(once) keyProcess.set(false);\n    once = false;\n    clearTimeout(timeOut);\n    if(typeof hiddenInput !== 'undefined') hiddenInput.focus();\n    timeOut = setTimeout(focusInput, 1000);\n  }\n\n  function loadRepoInfo() {\n    if(typeof repos !== 'undefined') {\n      repos = {};\n    }\n    if(typeof themes !== 'undefined') {\n      themes = {};\n    }\n    repos = octok.search.repos({\n      q: 'topic:modalfilemanager+topic:extension'\n    });\n    themes = octok.search.repos({\n      q: 'topic:modalfilemanager+topic:theme'\n    });\n  }\n\n  function getHeight() {\n    // \n    // The height of the window minus (status line + Directory + top location)\n    //\n    return window.document.body.clientHeight - 61;\n  }\n\n  function exitGitHub() {\n    keyProcess.set(true);\n    dispatch('closeGitHub',{});\n  }\n\n  function check(val) {\n    return((typeof val !== 'undefined')&&\n           (typeof val.data !== 'undefined')&&\n           (typeof val.data.items !== 'undefined'));\n  }\n\n  async function installTheme(thm) {\n    var confg = get(config);\n    var thmDir = await confg.localFS.appendPath(confg.configDir,'themes');\n    thmDir = await confg.localFS.appendPath(thmDir, thm.name);\n    if(!await confg.localFS.dirExists(thmDir)) {\n      await confg.localFS.createDir(thmDir);\n    }\n    await confg.localFS.runCommandLine(\"git clone '\" + thm.git_url + \"' '\" + thmDir + \"';\", (err, stdin, stdout) => {\n      // \n      // The clone should be there. Let's load the new theme.\n      // \n      loadTheme(thm);\n      loadRepoInfo();\n    });\n  }\n\n  async function loadTheme(thm) {\n    var confg = get(config);\n    var thmDir = await confg.localFS.appendPath(confg.configDir,'themes');\n    thmDir = await confg.localFS.appendPath(thmDir, thm.name);\n    const pfile = confg.localFS.appendPath(thmDir, 'package.json');\n    if(await confg.localFS.fileExists(pfile)) {\n      var manifest = JSON.parse(await confg.localFS.readFile(pfile));\n      const mfile = await confg.localFS.appendPath(thmDir, manifest.mfmtheme.main);\n      var newTheme = JSON.parse(await confg.localFS.readFile(mfile));\n      theme.set(newTheme);\n      addMsg(thm, \"This theme is now being used.\");\n    } else {\n      console.log(\"The theme doesn't have a package.json file.\");\n      addMsg(thm, \"The theme doesn't have a package.json file.\");\n    }\n  }\n\n  async function themeExists(thm) {\n    var confg = get(config);\n    var thmDir = await confg.localFS.appendPath(confg.configDir,'themes');\n    thmDir = await confg.localFS.appendPath(thmDir, thm.name);\n    return(await confg.localFS.dirExists(thmDir))\n  }\n\n  async function deleteTheme(thm) {\n    var confg = get(config);\n    var thmDir = await confg.localFS.appendPath(confg.configDir,'themes');\n    thmDir = await confg.localFS.appendPath(thmDir, thm.name);\n    //\n    // #TODO - make it not a command line.\n    //\n    await confg.localFS.runCommandLine('rm -Rf \"' + thmDir + '\";', (err, stdin, stdout) => {\n      loadRepoInfo();\n    })\n  }\n\n  async function installExtension(ext) {\n    var confg = get(config);\n    var extDir = await confg.localFS.appendPath(confg.configDir,'extensions');\n    extDir = await confg.localFS.appendPath(extDir, ext.name);\n    if(!await confg.localFS.dirExists(extDir)) {\n      await confg.localFS.createDir(extDir);\n    }\n    await confg.localFS.runCommandLine(\"git clone '\" + ext.git_url + \"' '\" + extDir + \"';\", (err, stdin, stdout) => {\n      addMsg(ext,'Restart the program to use this extension.');\n      loadRepoInfo();\n    });\n  }\n  \n  async function extExists(ext) {\n    var confg = get(config);\n    var extDir = await confg.localFS.appendPath(confg.configDir,'extensions');\n    extDir = await confg.localFS.appendPath(extDir, ext.name);\n    return(await confg.localFS.dirExists(extDir))\n  }\n  \n  async function deleteExtension(ext) {\n    var confg = get(config);\n    var extDir = await confg.localFS.appendPath(confg.configDir,'extensions');\n    extDir = await confg.localFS.appendPath(extDir, ext.name);\n    //\n    // #TODO = change to not using command line.\n    //\n    await confg.localFS.runCommandLine('rm -Rf \"' + extDir + '\";', (err, stdin, stdout) => {\n      loadRepoInfo();\n      addMsg(ext, 'Rerun the application to remove the extension from memory.');\n    });\n  }\n\n  function hasMsg(rp) {\n    if(msgs.length > 0) {\n      return(msgs.find(item => item.name === rp.name) !== 'undefined');\n    } else {\n      return(false);\n    }\n  }\n\n  function getMsg(rp) {\n    if(hasMsg(rp)) {\n      var item = msgs.find(item => item.name === rp.name);\n      if(typeof item !== 'undefined') {\n        return(item.msg);\n      } else {\n        return('');\n      }\n    } else {\n      return('');\n    }\n  }\n\n  function addMsg(rp,msg) {\n    msgs.push({\n      name: rp.name,\n      msg: msg\n    });\n    msgs = msgs;\n    themes = themes;\n    repos = repos;\n  }\n  \n  function inputChange(e) {\n    if((e.key === 'ArrowUp')||(e.key === 'k')) {\n      // \n      // Go up the list. Zero is at the top.\n      //\n      scrollDOM(-1);\n    } else if((e.key === 'ArrowDown')||(e.key === 'j')) {\n      // \n      // Go down the list. The largest index is at the bottom.\n      //\n      scrollDOM(1);\n    } else if(e.key === 'Escape') {\n      //\n      // Escape key. Just exit without doing anything.\n      //\n      exitGitHub();\n    }\n  } \n\n  function scrollDOM(amount) {\n    var adj = amount * 20;\n\n    if(pickerDOM !== null) {\n      pickerDOM.scrollTop += adj;\n      if(pickerDOM.scrollTop < 0) pickerDOM.scrollTop = 0;\n    }\n  }\n</script>\n\n",
    "<div id='messageboxbg'>\n  <div id='messagebox'\n       style=\"background-color: {$theme.backgroundColor};\n              border-color: {util.pSBC(.1,$theme.backgroundColor)};\n              color: {$theme.textColor};\" \n  >\n    {#if config !== null}\n      <h2>{config.title}</h2>\n      {#if typeof items !== null}\n        {#each items as item}\n          {#if typeof item !== 'undefined'}\n            {#if item.type === 'input'}\n              <p>{item.msg}</p>\n              <input type=\"text\" \n                     id=\"{item.id}\"\n                     bind:value={item.value}\n                     on:keydown={(e) => {\n                      if(e.key === 'Enter') {\n                        e.preventDefault();\n                        returnValue(true);\n                      }\n                     }}\n              />\n            {:else if item.type === 'selector'}\n              <select\n                id=\"{item.id}\"\n                bind:value={item.value}\n              >\n                {#each item.selections as selection}\n                  <option\n                    value={selection.value}\n                  >\n                    {selection.name}\n                  </option>\n                {/each}\n              </select>\n            {:else if item.type === 'picker'}\n              <div\n                id='pickerDiv'\n              >\n                <input\n                  id=\"{item.id}\"\n                  bind:value={pickerValue}\n                  on:keydown|preventDefault={pickerInputChange}\n                >\n                <div\n                  id=\"{item.id}picker\"\n                  class=\"picker\"\n                  bind:this={pickerDOM}\n                >\n                  {#each pickerItems as selection, key }\n                    {#if key === pickerNum }\n                      <a \n                        href=\"/#\"\n                        style=\"color: {$theme.backgroundColor};\n                               background-color: {$theme.textColor};\"\n                        class=\"pickerSelected\"\n                        on:click|preventDefault={(e) => {\n                          pickerSelected(selection);\n                        }}\n                      >\n                        {selection.name}\n                      </a>\n                    {:else}\n                      <a \n                        href=\"/#\"\n                        style=\"background-color: {$theme.backgroundColor};\n                               color: {$theme.textColor};\"\n                        on:click|preventDefault={(e) => {\n                          pickerSelected(selection);\n                        }}\n                      >\n                        {selection.name}\n                      </a>\n                    {/if}\n                  {/each}\n                </div>\n              </div>\n            {:else if item.type === 'spinner'}\n              <progress\n                id={item.name}\n                value={item.value}\n                max=\"100\"\n              />\n            {:else if item.type === 'label'}\n              <label\n                id={item.id}\n                for={item.for}\n              >\n                {item.text}\n              </label>\n            {:else if item.type === 'html'}\n              {@html item.text}\n            {/if}\n          {:else}\n            <p>System Error</p>\n          {/if}\n        {/each}\n      {:else}\n        <p>System Error</p>\n      {/if}\n      {#if ((typeof config.noShowButton !== 'undefined')&&(!config.noShowButton))}\n        <div id='butRow'>\n          <button on:click={(e) => { returnValue(false); }} >\n            Okay\n          </button>\n          <button on:click={cancel} >\n            Cancel\n          </button>\n        </div>\n      {/if}\n    {/if}\n  </div>\n</div>\n\n<style>\n  #messageboxbg {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    height: 100%;\n    width: 100%;\n    background-color: transparent;\n    z-index: 100;\n  }\n\n  #messagebox {\n    display: flex;\n    flex-direction: column;\n    margin: auto;\n    padding: 10px;\n    width: 70%;\n    border: 3px solid;\n    border-radius: 5px;\n  }\n\n  #butRow {\n    display: flex;\n    flex-direction: row;\n    margin: 20px 0px 0px 0px;\n  }\n\n  #butRow button:first-child {\n    margin: auto 10px auto auto;\n    border-radius: 5px;\n  }\n  \n  #butRow button:last-child {\n    margin: auto auto auto 10px;\n    border-radius: 5px;\n  }\n\n  #pickerDiv input {\n    width: 100%\n  }\n\n  .picker {\n    display: flex;\n    flex-direction: column;\n    overflow-y: scroll;\n    overflow-x: hidden;\n  }\n\n  .picker a {\n    text-decoration: none;\n  }\n\n  .pickerSelected {\n    text-decoration: none;\n  }\n</style>\n\n<script>\n  import { createEventDispatcher, onMount, afterUpdate, tick } from 'svelte';\n  import util from '../modules/util.js';\n  import { theme } from '../stores/theme.js';\n  import { keyProcess } from '../stores/keyProcess.js';\n\n  const dispatch = createEventDispatcher();\n\n  export let config = null;\n  export let items = null;\n  export let spinners = [];\n\n  let pickerNum = 0;\n  let pickerItems = [];\n  let pickerItemsOrig = [];\n  let pickerValue = \"\";\n  let pickerDOM;\n  let pickerExtra = false;\n\n  $: items = updateSpinners(spinners);\n  $: updateItems(items);\n  $: updateHeight(pickerDOM);\n\n  onMount(() => {\n    //\n    // Turn off key processing.\n    //\n    keyProcess.set(false);\n\n    //\n    // Return a function to be called when this component no longer\n    // is being shown.\n    //\n    return(() => {\n      keyProcess.set(true);\n    })\n  });\n\n  afterUpdate(async () => {\n    await tick();\n    var main = window.document.getElementById('msgboxMain');\n    if(main !== null) main.focus();\n  });\n\n  function updateSpinners(spins) {\n    if((items !== null)&&((typeof spins.length !== 'undefined')||(spins !== null))&&(spins.length > 0)) {\n      items = items.map(item => {\n        if(item.type === 'spinner') {\n          const nval = spins.find(spitem => spitem.name === item.name);\n          if(nval !== 'undefined') item.value = nval.value;\n        }\n        return(item);\n      });\n    }\n    return(items);\n  }\n\n  function returnValue(skip) {\n    if(typeof skip === 'undefined') skip = false;\n    keyProcess.set(true);\n    if(pickerItems.length > 0) {\n      items[0].value = pickerItems[pickerNum].value;\n    } else if(pickerExtra) {\n      items[0].value = pickerValue;\n    }\n    dispatch('msgReturn', {\n      ans: items\n    });\n    dispatch('closeMsgBox',{\n      skip: skip\n    });\n  }\n\n  function cancel(e) {\n    var skip = false;\n    keyProcess.set(true);\n    dispatch('closeMsgBox',{\n      skip:skip\n    });\n  }\n\n  function updateHeight(dom) {\n    if(typeof dom !== 'undefined') {\n      dom.style.maxHeight = new Number(document.body.clientHeight - 200).toString() + 'px';\n    }\n  }\n\n  function pickerInputChange(e) {\n    if(e.key === 'ArrowUp') {\n      // \n      // Go up the list. Zero is at the top.\n      //\n      movePickerBar(-1);\n    } else if(e.key === 'ArrowDown') {\n      // \n      // Go down the list. The largest index is at the bottom.\n      //\n      movePickerBar(1);\n    } else if(e.key === 'Escape') {\n      //\n      // Escape key. Just exit without doing anything.\n      //\n      keyProcess.set(true);\n      dispatch('closeMsgBox',{\n        skip: false\n      });\n    } else if(e.key === 'Tab') {\n      if(typeof pickerItems[pickerNum].value.name !== 'undefined') pickerValue = pickerItems[pickerNum].value.name;\n      else if(typeof pickerItems[pickerNum].name !== 'undefined') pickerValue = pickerItems[pickerNum].name;\n      else pickerValue = pickerItems[pickerNum].value;\n    } else if(((e.which >= 48)&&(e.which <= 90))||(e.which >= 186)||(e.which === 32)) {\n      // \n      // It's a normal printable character. Add it and re-evaluate.\n      //\n      pickerValue += e.key;\n      var cur = pickerValue.toLowerCase();\n      pickerItems = pickerItemsOrig.filter( it => it.name.toLowerCase().includes(cur));\n      movePickerBar(0);\n    } else if(e.keyCode === 8) {\n      pickerValue = pickerValue.slice(0, pickerValue.length-1);\n      var cur = pickerValue.toLowerCase();\n      pickerItems = pickerItemsOrig.filter( it => it.name.toLowerCase().includes(cur));\n      movePickerBar(0);\n    } else if(e.which === 13) {\n      //\n      // Enter key. Take the highlighted value and return.\n      //\n      keyProcess.set(true);\n      var pickerval = pickerItems[pickerNum].value;\n      if(pickerExtra && (pickerItems.length = 0)) {\n        pickerval = pickerValue;\n      }\n      dispatch('msgReturn', {\n        ans: [{\n          type: 'picker',\n          value: pickerval\n        }]\n      });\n      dispatch('closeMsgBox',{\n        skip: true\n      });\n    }\n  } \n\n  function pickerSelected(sel) {\n    //\n    // Enter key. Take the highlighted value and return.\n    //\n    keyProcess.set(true);\n    dispatch('msgReturn', {\n      ans: [{\n        type: 'picker',\n        value: sel.value\n      }]\n    });\n    dispatch('closeMsgBox',{\n      skip: true\n    });\n  }\n\n  function updateItems(itms) {\n    itms.forEach(itm => {\n      if(itm.type === 'picker') {\n        pickerItems = itm.selections;\n        pickerItemsOrig = itm.selections;\n        pickerExtra = itm.extra;\n      }\n    })\n  }\n  \n  function movePickerBar(amount) {\n    pickerNum = pickerNum + amount;\n    if(pickerNum > pickerItems.length - 1) pickerNum = pickerItems.length - 1;\n    if(pickerNum < 0) pickerNum = 0;\n    \n    if(pickerDOM !== null) {\n      var itemDOM = window.document.body.getElementsByClassName('pickerSelected')[0];\n      if(typeof itemDOM !== 'undefined') {\n        var cur = pickerNum * itemDOM.clientHeight;\n        var curP1 = (pickerNum + 1) * itemDOM.clientHeight;\n        if(pickerDOM.clientHeight < cur) pickerDOM.scrollTop += itemDOM.clientHeight; \n        if((pickerDOM.clientTop+pickerDOM.clientHeight) < curP1) pickerDOM.scrollTop += itemDOM.clientHeight;\n        if(pickerDOM.scrollTop > cur) pickerDOM.scrollTop = cur;\n        if(pickerDOM.scrollTop < 0) DOM.scrollTop = 0;\n      }\n    }\n  }\n</script>\n\n",
    "<div \n  class='panel'\n  bind:this={DOM}\n>\n  {#each entries as entry,index}\n    <Entry \n      pane={pane} \n      index={index}\n      entry={entry}\n      utilities={utilities}\n      on:changeDir={changeDir}\n      on:openFile={openFile}\n      on:changeViewing={changeViewingDOM}\n    />\n  {/each}\n  <div\n    class=\"empty\"\n    draggable=\"false\"\n    on:click={() => {cursorToPane()}}\n    on:drop|preventDefault={(e) => { dropFiles(e, 'drop'); }}\n    on:dragover|preventDefault={(e) => { dropFiles(e,'dragover'); }}\n  >\n  </div>\n</div>\n\n<style>\n  .panel {\n    display: flex;\n    flex-direction: column;\n    padding: 0px;\n    margin: 0px;\n    height: 100%;\n    overflow-y: scroll;\n    overflow-x: hidden;\n  }\n\n  .empty {\n    height: 100%;\n  }\n</style>\n\n<script>\n  import { createEventDispatcher } from 'svelte';\n  import { get } from 'svelte/store';\n  import Entry from './Entry.svelte';\n  import { currentCursor } from '../stores/currentCursor.js';\n  import { currentLeftFile } from '../stores/currentLeftFile.js';\n  import { currentRightFile } from '../stores/currentRightFile.js';\n  import { config } from '../stores/config.js';\n  import { leftDir } from '../stores/leftDir.js';\n  import { rightDir } from '../stores/rightDir.js';\n\n  export let pane = 'left';\n  export let entries = [];\n  export let utilities;\n\n  const dispatch = createEventDispatcher();\n\n  let DOM;\n\n  function changeDir(e) {\n    dispatch('changeDir', {\n      dir: e.detail,\n      pane: pane\n    });\n  }\n\n  function openFile(e) {\n    dispatch('openFile', e.detail);\n  }\n\n  function changeViewingDOM(e) {\n    var elDOM = e.detail;\n    if(elDOM !== null) {\n      DOM.scrollTop += elDOM.dir;\n      if(DOM.scrollTop < 0) DOM.scrollTop = 0;\n    }\n  }\n\n  async function dropFiles(e,type) {\n    var shiftKey = e.shiftKey;\n    switch(type) {\n      case 'over':\n        if(shiftKey) {\n          e.dataTransfer.dropEffect = 'move';\n        } else {\n          e.dataTransfer.dropEffect = 'copy';\n        }\n        break;\n      case 'drop':\n        // \n        // Get the local information for dropping into.\n        //\n        var dirPath = '';\n        var fileName = '';\n        var toEntry = {\n          dir: '',\n          name: '',\n          fileSystemType: utilities.type,\n          fileSystem: utilities,\n          type: 1\n        };\n        if(entries.length > 0) {\n          toEntry.dir = entries[0].dir;\n          toEntry.name = ''\n        } else {\n          var curPane;\n          if(pane === 'left') {\n            curPane = get(leftDir);\n          } else {\n            curPane = get(rightDir);\n          }\n          toEntry.dir = curPane.path;\n          toEntry.name = '';\n        }\n\n        // \n        // Process the information from the drop.\n        // \n        const dataTransArray = e.dataTransfer.getData('text/plain').split('\\n');\n        const lconfig = get(config);\n        var fromEntries = [];\n        dataTransArray.forEach(async dataTrans => {\n          const parts = dataTrans.split('|');\n          if(parts[1] === '1') {\n            dirPath = parts[0];\n            var fdir = await utilities.splitFilePath(dirPath);\n            const nwDir = await utilities.appendPath(toEntry.dir, fdir.name);\n            await utilities.makeDir(nwDir);\n            toEntry.dir = nwDir;\n          } else {\n            const result = await utilities.splitFilePath(parts[0]);\n            dirPath = result.dir;\n            fileName = result.name;\n          }\n          fromEntries.push({\n            dir: dirPath,\n            name: fileName,\n            fileSystemType: utilities.type,\n            fileSystem: utilities\n          });\n        });\n        if(shiftKey) {\n          lconfig.extensions.getExtCommand('moveEntriesCommand').command(fromEntries, toEntry);\n        } else {\n          lconfig.extensions.getExtCommand('copyEntriesCommand').command(fromEntries, toEntry);\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  function cursorToPane() {\n    var nEntry = {\n      dir: '',\n      name: '',\n      fileSystemType: utilities.type,\n      fileSystem: utilities,\n      type: 1,\n      size: 0,\n      datetime: '',\n      seleted: false\n    }\n    if(entries.length > 0) {\n      nEntry = entries[0];\n    } else {\n      var curPane;\n      if(pane === 'left') {\n        curPane = get(leftDir);\n      } else {\n        curPane = get(rightDir);\n      }\n      nEntry.dir = curPane.path;\n      nEntry.name = '';\n    }\n    currentCursor.set({\n      pane: pane,\n      entry: nEntry\n    });\n\n    if(pane === 'right') {\n      currentRightFile.set(\n        {\n          entry: nEntry\n        }\n      );\n    } else {\n      currentLeftFile.set(\n        {\n          entry: nEntry\n        }\n      )\n    }\n  }\n</script>\n",
    "<div\n  id='Preferences'\n  style=\"background-color: {$theme.backgroundColor};\n         color: {$theme.textColor};\n         font-family: {$theme.font};\n         font-size: {$theme.fontSize};\"\n>\n  <input \n    id=\"vimInputDiv\"\n    bind:this={vimInput}\n    on:blur={() => {\n      if(keepBlur&&(vimInput !== null)) {\n        vimInput.focus();\n      }\n    }}\n    on:keydown={(e) => {\n      if(keepBlur) {\n        e.preventDefault();\n        switch(e.key) {\n          case 'g': \n            showPanel = 'general';\n            break;\n          case 't': \n            showPanel = 'theme';\n            break;\n          case 'e': \n            showPanel = 'extension';\n            break;\n          case 'ArrowUp': \n          case 'k':\n            scrollDiv(-1);\n            break;\n          case 'ArrowDown': \n          case 'j':\n            scrollDiv(1);\n            break;\n          case 'Escape': \n            keepBlur = false;\n            exitPrefs();\n            break;\n          default:\n            break;\n        }\n      }\n    }}\n  />\n  <h2>Preferences</h2>\n  <ul>\n    {#if showPanel === 'general'}\n      <li\n        on:click={(e) => { showPanel = 'general'; }}\n        style=\"border-color: {$theme.textColor};\n               background-color: {$theme.textColor};\n               color: {$theme.backgroundColor};\"\n      >\n        General\n      </li>\n    {:else}\n      <li\n        on:click={(e) => { showPanel = 'general'; }}\n        style=\"border-color: {$theme.textColor};\n               color: {$theme.textColor};\n               background-color: {$theme.backgroundColor};\"\n      >\n        General\n      </li>\n    {/if}\n    {#if showPanel === 'theme'}\n      <li\n        on:click={(e) => { showPanel = 'theme'; }}\n        style=\"border-color: {$theme.textColor};\n               background-color: {$theme.textColor};\n               color: {$theme.backgroundColor};\"\n      >\n        Theme\n      </li>\n    {:else}\n      <li\n        on:click={(e) => { showPanel = 'theme'; }}\n        style=\"border-color: {$theme.textColor};\n               color: {$theme.textColor};\n               background-color: {$theme.backgroundColor};\"\n      >\n        Theme\n      </li>\n    {/if}\n    {#if showPanel === 'extension'}\n      <li\n        on:click={(e) => { showPanel = 'extension'; }}\n        style=\"border-color: {$theme.textColor};\n               background-color: {$theme.textColor};\n               color: {$theme.backgroundColor};\"\n      >\n        Extension\n      </li>\n    {:else}\n      <li\n        on:click={(e) => { showPanel = 'extension'; }}\n        style=\"border-color: {$theme.textColor};\n               color: {$theme.textColor};\n               background-color: {$theme.backgroundColor};\"\n      >\n        Extension\n      </li>\n    {/if}\n  </ul>\n  {#if showPanel === 'general'}\n    <GeneralPrefs \n      on:setScrollDOM={(e) => {\n        scrollDOM = e.detail.DOM;\n      }}\n      on:setKeyProcess={(e) => {\n        keepBlur = e.detail.blur;\n        if(keepBlur) timeOut = setTimeout(focusInput, 1000);\n      }}\n    />\n  {:else if showPanel === 'theme'}\n    <ThemePrefs  \n      on:setScrollDOM={(e) => {\n        scrollDOM = e.detail.DOM;\n      }}\n      on:setKeyProcess={(e) => {\n        keepBlur = e.detail.blur;\n        if(keepBlur) timeOut = setTimeout(focusInput, 1000);\n      }}\n    />\n  {:else if showPanel === 'extension'}\n    <ExtensionPrefs \n      on:switchView={(e)=>{\n        switchView(e.detail.view);\n      }} \n      on:setScrollDOM={(e) => {\n          scrollDOM = e.detail.DOM;\n      }}\n      on:setKeyProcess={(e) => {\n        keepBlur = e.detail.blur;\n        if(keepBlur) timeOut = setTimeout(focusInput, 1000);\n      }}\n    />\n  {/if}\n  <div\n    id='buttonRow'\n  >\n    <button \n    style=\"color: {$theme.backgroundColor};\n           background-color: {$theme.textColor};\n           font-family: {$theme.font};\n           font-size: {$theme.fontSize};\"\n      on:click={() => {\n        exitPrefs();\n      }}\n    >\n      Exit Preferences\n    </button>\n  </div>\n</div>\n\n<style>\n  #Preferences {\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    z-index: 100;\n    width: 100%;\n    height: 100%;\n  }\n\n  #vimInputDiv {\n    width: 0px;\n    height: 0px;\n    margin: 0px;\n    padding: 0px;\n    border: 0px solid transparent;\n  }\n\n  #buttonRow {\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    margin: 5px;\n  }\n\n  #buttonRow button {\n    margin: auto;\n    border-radius: 5px;\n    padding: 5px;\n  }\n\n  ul {\n    display: flex;\n    flex-direction: row;\n    padding: 0px;\n    margin: 0px 5px 0px 10px;\n  }\n\n  ul li {\n    border-radius: 25px 5px 0px 0px;\n    border: 3px solid;\n    padding: 5px 5px 2px 15px;\n    margin: 0px 10px 0px 0px;\n    list-style: none;\n  }\n\n  h2 {\n    text-align: center;\n    margin-top: 3px;\n  }\n</style>\n\n<script>\n  import { onMount, createEventDispatcher } from 'svelte';\n  import { theme } from '../stores/theme.js';\n  import GeneralPrefs from './GeneralPrefs.svelte';\n  import ThemePrefs from './ThemePrefs.svelte';\n  import ExtensionPrefs from './ExtensionPrefs.svelte';\n  import OS from '../modules/OS.js';\n \n\tconst dispatch = createEventDispatcher();\n\n  let localFS;\n  let configDir;\n  let osNames = ['macOS', 'linux', 'windows'];\n  let showPanel = 'general';\n  let vimInput = null;\n  let keepBlur = true;\n  let scrollDOM = null;\n  let timeOut;\n\n  onMount(() => {\n    // \n    // Get the local file system utilities.\n    // \n    localFS = OS;\n\n    //\n    // Initialize local.\n    //\n    localFS.init();\n\n    // \n    // Setup the configuration directory.\n    //\n    configDir = localFS.getConfigDir();\n    if(!localFS.dirExists(configDir)) {\n      localFS.makeDir(configDir);\n      localFS.makeDir({\n        dir: configDir,\n        name: 'extensions',\n        fileSystem: localFS\n      });\n    }\n\n    // \n    // keep the input focused. \n    // \n    timeOut = setTimeout(focusInput, 1000);\n\n    //\n    // return a command to unsubscribe from everything.\n    //\n    return(() => {\n      clearTimeout(timeOut);\n    })\n  });\n\n  function getOS() {\n    var result = osNames[0];\n\n    return result;\n  }\n\n  function switchView(view) {\n    if((view === 'filemanager')||(view === 'preferences')) {\n      dispatch('switchView', {\n        view: view\n      });\n    }\n  }\n\n  function exitPrefs() {\n    switchView('filemanager');\n  }\n\n  function scrollDiv(amount) {\n      var adj = amount * 20;\n\n    if(scrollDOM !== null) {\n        scrollDOM.scrollTop += adj;\n      if(scrollDOM.scrollTop < 0) scrollDOM.scrollTop = 0;\n    }\n  }\n\n  function focusInput() {\n    if((vimInput !== null)&&(keepBlur)) {\n      vimInput.focus();\n    }\n    timeOut = setTimeout(focusInput, 1000);\n  }\n</script>\n\n",
    "<div id=\"quickSearch\" \n     style=\"left: {position}px;\" \n>\n  <input type='text' \n         bind:this={qsInputDOM}\n         bind:value={qsInput} \n         on:keydown={processKey}\n         on:input={processInput}\n         on:blur={(e) => { exitQS(); }}\n         style=\"background-color: {localTheme.textColor};\n                text-color: {localTheme.backgroundColor};\"\n  />\n</div>\n\n<style>\n  #quickSearch {\n    position: absolute;\n    display: flex;\n    flex-direction: row;\n    margin: 0px;\n    padding: 0px;\n    border: 0px solid transparent;\n    height: 30px;\n    max-height: 30px;\n    min-height: 30px;\n    width: 100px;\n    max-width: 100px;\n    min-width: 100px;\n    bottom: 0px;\n    z-index: 100;\n    user-select: none;\n    text-decoration: none;\n  }\n\n  #quickSearch input {\n    outline-color: transparent;\n    margin: auto;\n    padding: 0px;\n    width: 100px;\n    border: 3px solid transparent;\n    border-radius: 5px;\n  }\n</style>\n\n<script> \n  import { onMount, beforeUpdate, createEventDispatcher, afterUpdate } from 'svelte';\n  import { get } from 'svelte/store';\n  import { currentCursor } from '../stores/currentCursor.js';\n  import { theme } from '../stores/theme.js';\n  import { keyProcess } from '../stores/keyProcess.js';\n\n  const dispatch = createEventDispatcher();\n\n  export let rightDOM;\n  export let leftDOM;\n  export let leftEntries;\n  export let rightEntries;\n\n  let qsInput = '';\n  let qsInputDOM = null;\n  let cursor = null;\n  let localTheme = null;\n  let position = null;\n  let origEntries = null;\n\n  beforeUpdate(() => {\n    if(cursor === null) {\n      getDefaults();\n    }\n  });\n\n  afterUpdate(() => {\n    if(qsInputDOM !== null) {\n      qsInputDOM.focus();\n    }\n  })\n\n  onMount(() => {\n    if(cursor.pane === 'left') {\n      position = leftDOM.clientWidth - 100;\n    } else {\n      position = rightDOM.clientWidth + leftDOM.clientWidth - 85;\n    }\n  });\n\n  function getDefaults() {\n    cursor = get(currentCursor);\n    localTheme = get( theme );\n    keyProcess.set(false);\n    origEntries = usingEntry(leftEntries, rightEntries);\n  }\n\n  function usingEntry(leftE, rightE) {\n    if(cursor.pane === 'left') {\n      return(leftE);\n    } else {\n      return(rightE);\n    }\n  }\n\n  function exitQS(skip) {\n    if(typeof skip === 'undefined') skip = false;\n    cursor = null;\n    dispatch('closeQuickSearch',{\n      skip: skip\n    });\n  }\n\n  function processKey(e) {\n    const key = e.key;\n\n    // \n    // If the Enter key, quit the quick search.\n    //\n    if(key === 'Escape') {\n      e.preventDefault();\n      exitQS(false);\n    } else if(key === 'Enter') {\n      e.preventDefault();\n      exitQS(true);\n    }\n  }\n\n  function processInput(e) {\n    if(cursor === null) {\n      getDefaults();    \n    }\n\n    //\n    // filter the entries by the quick search ignoring case.\n    // \n    var entries = origEntries;\n    entries = entries.filter(item => item.name.toLowerCase().includes(qsInput.toLowerCase()));\n\n    // \n    // Send to the panel only if there are some entries to see.\n    // \n    if(entries.length > 0) {\n      dispatch('changeEntries', {\n        pane: cursor.pane,\n        entries: entries\n      });\n    }\n  }\n</script>\n",
    "<div id='resizeBorder'\n     style=\"padding: 0px; \n            margin: 0px;\n            width: 10px;\n            max-width: 10px;\n            min-width: 10px;\n            border-left: 3px solid {localTheme.borderColor};\n            border-right: 3px solid {localTheme.borderColor};\"\n      on:mousedown={e => {\n        dispatch('mouseDown', true);\n      }}\n      on:mouseup={e => {\n        dispatch('mouseDown', false);\n      }}\n>\n</div>\n\n<style>\n  #resizeBorder {\n    display: flex;\n    flex-direction: row;\n    height: auto;\n    cursor: ew-resize;\n  }\n</style>\n\n<script>\n  import { onMount, createEventDispatcher } from \"svelte\";\n  import { theme } from '../stores/theme.js';\n\n  const dispatch = createEventDispatcher();\n  \n  let localTheme = {};\n\n  onMount(() => {\n    var unsubscribeTheme = theme.subscribe(value => {\n      localTheme = value;\n    });\n    return(() => {\n      unsubscribeTheme();\n    })\n  });\n</script>\n",
    "<div \n  id='statusLine' \n  style=\"background-color: {$theme.backgroundColor};\n         color: {$theme.textColor};\n         font-family: {$theme.font};\n         font-size: {$theme.fontSize};\n         border-top: 3px solid {$theme.borderColor};\"\n>\n  <span class='state' \n        style='color: \"black\"; background-color: {stateColor};'\n  >\n    {localInputState}\n  </span>\n  <span class='pane'\n        style='color: {$theme.Cyan}; background-color: {$theme.backgroundColor};'\n  >\n    {localCurrentCursor.pane}\n  </span>\n  <span class='file customdata' \n        style='color: {$theme.textColor}; background-color: {$theme.backgroundColor};'\n        data-tooltip='{localCurrentCursor.entry.name}' \n  >\n    {localCurrentCursor.entry.name}\n  </span>\n  <span class='file customdata'\n        style='color: {$theme.Orange}; background-color: {$theme.backgroundColor};'\n        data-tooltip='{DT}' \n  >\n    {DT}\n  </span>\n  <span class='file'\n        style='color: {$theme.Green}; \n               background-color: {$theme.backgroundColor};\n               flex-grow: 2;'\n  >\n    {size}\n  </span>\n</div>\n\n<style>\n  #statusLine {\n    display: flex;\n    flex-direction: row;\n    flex-grow: 0;\n    margin: 0px;\n    padding: 0px;\n    width: 100%;\n    min-height: 31px;\n    height: 31px;\n    max-height: 31px;\n  }\n\n  .pane {\n    margin: 0px;\n    padding: 5px 5px 5px 10px;\n    width: 35px;\n    min-width: 50px;\n  }\n\n  .state {\n    margin: 0px;\n    padding: 5px 10px 5px 10px;\n    color: black;\n    min-width: 50px;\n  }\n\n  .file {\n    margin: 0px;\n    padding: 5px 10px 5px 5px;\n    min-width: 50px;\n    overflow: hidden;\n    white-space: nowrap;\n  }\n\n  span.customdata {\n    position: relative ;\n  }\n\n  span.customdata:hover::before {\n    content: attr(data-tooltip);\n    background-color: inherit;\n    color: inherit;\n    position: fixed;\n    bottom: 2em;\n    min-width: 20px;\n    border: 1px #808080 solid;\n    padding: 8px;\n    z-index: 1;\n  } \n</style>\n\n<script>\n  import { onMount } from \"svelte\";\n  import { theme } from '../stores/theme.js';\n  import { currentCursor } from '../stores/currentCursor.js';\n  import { inputState } from '../stores/inputState.js';\n  import { stateMapColors } from '../stores/stateMapColors.js';\n\n  import util from '../modules/util.js';\n\n  let localInputState = \"normal\";\n  let localCurrentCursor = {\n    entry: {\n      name: 'test.txt',\n      size: '',\n      datetime: ''\n    },\n    pane: ''\n  };\n  let localStateMapColors = [];\n  let stateColor = \"#6fb1e9\";\n  let size = 0;\n  let DT;\n\n  onMount(() => {\n    //\n    // Here, we are subscribing to the different stores and setting their \n    // default values;\n    //\n    var unSubscribeInputState = inputState.subscribe(value => {\n      localInputState = value;\n      stateColor = localStateMapColors[localInputState];\n    })\n    var unSubscribeCurrentCursor = currentCursor.subscribe(value => {\n      localCurrentCursor = value;\n      if(typeof value.entry === 'undefined') {\n        localCurrentCursor = {\n          entry: {\n            name: '',\n            size: '',\n            datetime: ''\n          },\n          pane: localCurrentCursor.pane\n        }\n        size = '';\n      } else {\n        size = util.readableSize(localCurrentCursor.entry.size);\n\n        //\n        // Setup a locale dependent way to show date and time. \n        // #TODO: make more programmable?\n        //\n        DT = (new Date(localCurrentCursor.entry.datetime)).toLocaleString();\n        if(DT === 'Invalid Date') DT = '';\n      }\n    });\n    var unSubscribeStateMapColors = stateMapColors.subscribe( value => {\n      localStateMapColors = value;\n      stateColor = localStateMapColors[localInputState];\n    })\n    return(() => {\n      unSubscribeCurrentCursor();\n      unSubscribeInputState();\n      unSubscribeStateMapColors();\n    })\n  });\n</script>\n\n",
    "<tr>\n  <td>\n    {label}\n  </td>\n  <td\n    on:click={() => { changeValue(); }}\n  >\n    <div class='rowCell'>\n      {#if changeString}\n        <input \n          style=\"color: {$theme.backgroundColor};\n                 background-color: {$theme.textColor};\n                 font-family: {$theme.font};\n                 font-size: {$theme.fontSize};\"\n          bind:value={value}\n          on:blur={() => {\n            changeStringValue(value);\n          }}\n        />\n      {:else}\n        {value}\n      {/if}\n      {#if value.startsWith('#')}\n        <div class='colorDiv' style=\"background-color: {value}; border-color: {$theme.textColor};\">\n        </div>\n      {/if}\n    </div>\n  </td>\n</tr>\n{#if changeColor}\n  <div \n    class='cpicker'\n  >\n    <HsvPicker on:colorChange={(e) => { colorCallback(e.detail); }} startColor={value}/>\n    <button \n      on:click={setValue}\n    >\n      Set Value\n    </button>\n  </div>\n{/if}\n\n<style> \n  .cpicker {\n    display: flex;\n    flex-direction: row;\n    color: black;\n  }\n  \n  .rowCell {\n    display: flex;\n    flex-direction: row;\n  }\n\n  .colorDiv {\n    height: 18px;\n    width: 18px;\n    margin: auto 0px auto 10px;\n    padding: 0px;\n    border: solid 1px;\n  }\n\n  .rowCell input {\n    width: 100%;\n    border: solid 1px transparent;\n    border-radius: 10px;\n  }\n</style>\n\n<script> \n  import { createEventDispatcher } from 'svelte';\n  import { theme } from '../stores/theme.js';\n  import { HsvPicker } from 'svelte-color-picker';\n\n  const dispatch = createEventDispatcher();\n\n  export let label = '';\n  export let value = '';\n\n  let changeColor = false;\n  let changeString = false;\n\n  function changeValue() {\n    if(value[0] === '#') {\n      changeColor = true;\n    } else {\n      changeString = true;\n    }\n  }\n\n  function changeStringValue(val) {\n    changeString = false;\n    dispatch('change', {\n      value: val\n    });\n  }\n\n  function colorCallback(rgba) {\n    const newvalue = rgbToHex(parseInt(rgba.r), parseInt(rgba.g), parseInt(rgba.b));\n    dispatch('change', {\n      value: newvalue\n    });\n  }\n\n  function setValue() {\n    changeColor = false;\n  }\n\n  function componentToHex(c) {\n    let hex = c.toString(16);\n    return hex.length == 1 ? \"0\" + hex : hex;\n  }\n\n  function rgbToHex(r, g, b) {\n    return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\n  }\n</script>\n",
    "<div\n  id='theme' \n  bind:this={scrollDOM}\n>\n  <h3>Current Theme Values</h3>\n  {#if localTheme !== null}\n    <table>\n      <thead>\n        <tr>\n          <th>\n            Name\n          </th>\n          <th>\n            Value\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        {#each Object.entries(localTheme) as kv}\n          <ThemeItem \n            label={kv[0]}\n            value={kv[1]}\n            on:change={(e) => { changeValue(kv, e); }}\n          />\n        {/each}\n      </tbody>\n    </table>\n  {/if}\n  <h3>Save as New Theme</h3>\n  <div\n    class='row'\n  >\n    <label \n      for='themeNameInput' \n    >\n      New Theme Name:\n    </label>\n    <input \n      id='themeNameInput' \n      style=\"color: {$theme.backgroundColor};\n             background-color: {$theme.textColor};\n             font-family: {$theme.font};\n             font-size: {$theme.fontSize};\"\n      bind:value={themeName}\n      on:mouseover={() => {\n        setFocus(false);\n      }}\n      on:mouseleave={() => {\n        setFocus(true);\n      }}\n      on:blur={() => {\n        setFocus(true);\n      }}\n    />\n    <button \n      id='createThemeButton'\n      style=\"color: {$theme.backgroundColor};\n             background-color: {$theme.textColor};\n             font-family: {$theme.font};\n             font-size: {$theme.fontSize};\"\n      on:click={createTheme}\n    >\n      Save New Theme\n    </button>\n  </div>\n  {#if showMsgBox}\n    <div\n      id=\"msgBoxTheme\"\n      style=\"background-color: {$theme.backgroundColor};\n             color: {$theme.textColor};\n             border-color: {$theme.textColor};\n             font-family: {$theme.font};\n             font-size: {$theme.fontSize};\"\n    >\n      <h3>{msgTitle}</h3>\n      <p>{msgText}</p>\n      <button\n        style=\"color: {$theme.backgroundColor};\n               background-color: {$theme.textColor};\n               font-family: {$theme.font};\n               font-size: {$theme.fontSize};\"\n        on:click={() => {\n          showMsgBox = false;\n        }}\n      >\n        Okay\n      </button>\n    </div>\n  {/if}\n  <h3>Existing Themes</h3>\n  {#if themeList !== null}\n    <table\n      id='themeTable'\n    >\n      <thead>\n        <tr>\n          <th>\n            Theme Name\n          </th>\n          <th>\n          </th>\n          <th>\n          </th>\n          <th>\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        {#each themeList as item}\n          <tr>\n            <td>\n              {item.name}\n            </td>\n            <td>\n              <button\n                class='updateButton'\n                style=\"color: {$theme.backgroundColor};\n                       background-color: {$theme.textColor};\n                       font-family: {$theme.font};\n                       font-size: {$theme.fontSize};\"\n                on:click={()=>{\n                  setTheme(item);\n                }}\n              >\n                Set Theme\n              </button>\n            </td>\n            <td>\n              <button\n                class='updateButton'\n                style=\"color: {$theme.backgroundColor};\n                       background-color: {$theme.textColor};\n                       font-family: {$theme.font};\n                       font-size: {$theme.fontSize};\"\n                on:click={()=>{\n                  updateTheme(item);\n                }}\n              >\n                Update\n              </button>\n            </td>\n            <td>\n              <button \n                class='deleteButton'\n                on:click={()=>{\n                  deleteTheme(item);\n                }}\n              >\n                Delete\n              </button>\n            </td>\n          </tr>\n        {/each}\n      </tbody>\n    </table>\n  {/if}\n</div>\n\n<style>\n  #theme {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    margin: 0px 0px 0px 10px;\n    overflow-y: auto;\n    overflow-x: hidden;\n  }\n\n  #createThemeButton {\n    padding: 5px;\n    margin: 0px 10px;\n    border: solid 1px transparent;\n    border-radius: 5px;\n  }\n\n  #msgBoxTheme {\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    border: solid 2px;\n    border-radius: 10px;\n    top: 25%;\n    left: 25%;\n    width: 50%;\n    padding: 10px;\n  }\n\n  #msgBoxTheme button {\n    border: solid 1px;\n    border-radius: 10px;\n    width: 50%;\n    margin: auto;\n  }\n\n  #themeTable {\n    width: 100%;\n    margin: 20px 0px 20px 0px;\n  }\n\n  #themeNameInput {\n    padding: 5px;\n    margin: 0px 10px 0px 10px;\n    border: solid 1px transparent;\n    border-radius: 5px;\n  }\n  \n  label {\n    margin: auto 10px;\n  }\n\n  table {\n    width: 60%;\n  }\n\n  .row {\n    display: flex;\n    flex-direction: row;\n  }\n\n  .updateButton {\n    border: solid 1px transparent;\n    border-radius: 10px;\n  }\n\n  .deleteButton {\n    border: solid 1px transparent;\n    border-radius: 10px;\n    background: red;\n    color: black;\n  }\n\n</style>\n\n<script>\n  import { onMount, afterUpdate, createEventDispatcher } from 'svelte';\n  import ThemeItem from '../components/ThemeItem.svelte';\n  import { theme } from '../stores/theme.js';\n  import { config } from '../stores/config.js';\n\n  const dispatch = createEventDispatcher();\n\n  let localTheme = null;\n  let localConfig = null;\n  let themeName = '';\n  let showMsgBox = false;\n  let msgText = '';\n  let msgTitle = '';\n  let themeList = null;\n  let scrollDOM = null;\n  let first = true;\n\n  onMount(() => {\n    const unsubTheme = theme.subscribe(value => {\n      localTheme = value;\n    });\n\n    const unsubConfig = config.subscribe(value => {\n      localConfig = value;\n      if(typeof localConfig.localFS !== 'undefined') {\n        loadThemeList();\n      }\n    });\n    \n    return(() => {\n      unsubTheme();\n      unsubConfig();\n    })\n  });\n\n  afterUpdate(() => {\n    if((scrollDOM !== null)&&(first)) {\n      dispatch('setScrollDOM', {\n        DOM: scrollDOM\n      });\n      first = false;\n    }\n  });\n\n  function loadThemeList() {\n    themeList = localConfig.localFS.getDirList(localConfig.localFS.appendPath(localConfig.configDir,'themes'));\n    themeName = '';\n  }\n\n  function setFocus(flag) {\n    dispatch('setKeyProcess', {\n      blur: flag\n    });\n  }\n\n  function changeValue(kv, e) {\n    localTheme[kv[0]] = e.detail.value;\n    theme.set(localTheme);\n  }\n\n  async function createTheme() {\n    var thmDir = await localConfig.localFS.appendPath(localConfig.configDir,'themes');\n    thmDir = await localConfig.localFS.appendPath(thmDir, themeName);\n    if(!await localConfig.localFS.dirExists(thmDir)) {\n      await localConfig.localFS.createDir(thmDir);\n      await localConfig.localFS.runCommandLine('cd \"' + thmDir + '\"; npm init -y;', async (err, stdout) => {\n        if(err) {\n          // \n          // Something went wrong.\n          // \n          console.log(err);\n          console.log(stdout);\n        } else {\n          // \n          // Add the needed fields to the package.json file for Modal File Manager.\n          // \n          const pfile = await localConfig.localFS.appendPath(thmDir, 'package.json');\n          var pkgConfig = JSON.parse(await localConfig.localFS.readFile(pfile));\n          pkgConfig.mfmtheme = {\n            name: themeName,\n            description: '',\n            type: 0,\n            github: '',\n            main: themeName + '.json'\n          };\n          await localConfig.localFS.writeFile(pfile, JSON.stringify(pkgConfig));\n        }\n        // \n        // Create the actual theme file.\n        // \n        var thmFile = await localConfig.localFS.appendPath(thmDir,themeName + '.json');\n        await localConfig.localFS.writeFile(thmFile, JSON.stringify(localTheme));\n        loadThemeList();\n      });\n    } else {\n      // \n      // The theme exists. Tell the user to update a theme instead.\n      // \n      msgText = 'The theme, ' + themeName + ', already exists. Please update the theme below.';\n      msgTitle = 'Theme Preferences';\n      showMsgBox = true;\n    }\n  }\n\n  async function updateTheme(thm) {\n    var thmDir = await localConfig.localFS.appendPath(localConfig.configDir,'themes');\n    thmDir = await localConfig.localFS.appendPath(thmDir, thm.name);\n    const pfile = await localConfig.localFS.appendPath(thmDir, 'package.json');\n    var pkgConfig = JSON.parse(await localConfig.localFS.readFile(pfile));\n    var thmFile = await localConfig.localFS.appendPath(thmDir,pkgConfig.mfmtheme.main);\n    await localConfig.localFS.writeFile(thmFile, JSON.stringify(localTheme));\n  }\n\n  async function deleteTheme(thm) {\n    var thmDir = await localConfig.localFS.appendPath(localConfig.configDir,'themes');\n    await localConfig.localFS.deleteEntries({\n      dir: thmDir,\n      name: thm.name,\n      fileSystem: localConfig.localFS\n    }, (err,stdout) => {\n      if(!err) {\n        themeList = localConfig.localFS.getDirList(localConfig.localFS.appendPath(localConfig.configDir,'themes'));\n      } else {\n        msgText = 'The theme, ' + thm.name + ', can\\'t be deleted.';\n        msgTitle = 'Theme Preferences';\n        showMsgBox = true;\n      }\n    });\n    loadThemeList();\n  }\n\n  async function setTheme(thm) {\n    var thmDir = await localConfig.localFS.appendPath(localConfig.configDir,'themes');\n    thmDir = await localConfig.localFS.appendPath(thmDir, thm.name);\n    const pfile = await localConfig.localFS.appendPath(thmDir, 'package.json');\n    var pkgConfig = JSON.parse(await localConfig.localFS.readFile(pfile));\n    var thmFile = await localConfig.localFS.appendPath(thmDir,pkgConfig.mfmtheme.main);\n    localTheme = JSON.parse(await localConfig.localFS.readFile(thmFile));\n    theme.set(localTheme);\n  }\n</script>\n",
    "<div \n  id='titleBar'\n  data-wails-drag\n  style=\"background-color: {$theme.backgroundColor};\n         color: {$theme.textColor};\n         font-family: {$theme.font};\n         font-size: {$theme.fontSize};\n         border-bottom: 3px solid {$theme.borderColor};\"\n>\n  <div \n    id='spacer'\n  >\n  </div>\n\n  <div\n    id='title'\n  >\n    <p>Modal File Manager</p>\n  </div>\n\n  <div \n    id='spacer2'\n  >\n  </div>\n</div>\n\n<style>\n  #titleBar {\n    display: flex;\n    flex-direction: row;\n    flex-grow: 0;\n    height: 37px;\n    width: 100%;\n  }\n\n  #spacer {\n    min-height: 37px; \n    width: 76px;\n    flex-grow: 0;\n  }\n  \n  #spacer2 {\n    min-height: 37px; \n    width: 76px;\n    flex-grow: 0;\n  }\n\n  #title {\n    flex-grow: 1;\n    padding: 0px;\n    margin: 0px;\n  }\n\n  #title p {\n    padding: 0px;\n    margin: 10px auto;\n    text-align: center;\n  }\n</style>\n\n<script>\n  import { onMount } from \"svelte\";\n  import { theme } from '../stores/theme.js';\n \n</script>\n"
  ],
  "names": [],
  "mappings": "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"
}